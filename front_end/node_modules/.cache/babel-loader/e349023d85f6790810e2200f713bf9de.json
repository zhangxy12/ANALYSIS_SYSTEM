{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\babel-loader\\lib\\index.js!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\WXAnalyze\\user.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\WXAnalyze\\user.vue","mtime":1737646591704},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\babel.config.js","mtime":1732591727371},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":1733210776030},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCBnc2FwIGZyb20gImdzYXAiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkJ1YmJsZUNoYXJ0IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnViYmxlczogW10sCiAgICAgIGNvbnRhaW5lcldpZHRoOiAwLAogICAgICBjb250YWluZXJIZWlnaHQ6IDAKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaEJ1YmJsZURhdGEodGFnVGFza0lkKSB7CiAgICAgIHRoaXMuJGF4aW9zLmdldChgL3VzZXJfd3g/dGFnX3Rhc2tfaWQ9JHt0YWdUYXNrSWR9YCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5jb250YWluZXJXaWR0aCA9IHRoaXMuJHJlZnMuY29udGFpbmVyLm9mZnNldFdpZHRoOwogICAgICAgIHRoaXMuY29udGFpbmVySGVpZ2h0ID0gdGhpcy4kcmVmcy5jb250YWluZXIub2Zmc2V0SGVpZ2h0OwogICAgICAgIHRoaXMuYnViYmxlcyA9IFtdOwogICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICB0aGlzLmFkZEJ1YmJsZShpdGVtKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmFwcGx5U2hha2VBbmltYXRpb24oKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0UmFuZG9tUG9zaXRpb24obWF4KSB7CiAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogbWF4OwogICAgfSwKICAgIGFkZEJ1YmJsZShuZXdCdWJibGUpIHsKICAgICAgbmV3QnViYmxlLmNvbG9yID0gYHJnYigke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nil9LCAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nil9LCAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nil9KWA7CiAgICAgIGNvbnN0IG1heFRyaWVzID0gMTAwOwogICAgICBsZXQgdHJpZXMgPSAwOwogICAgICBsZXQgeCwgeTsKICAgICAgY29uc3Qgc2l6ZSA9IDMwICsgbmV3QnViYmxlLmNvdW50ICogMjU7IC8vIOagueaNrmNvdW506LCD5pW05rCU5rOh5aSn5bCPCiAgICAgIGNvbnN0IG51bVNpemUgPSAxMCArIG5ld0J1YmJsZS5jb3VudDsgLy8g5qC55o2uY291bnTosIPmlbTlrZfkvZPlpKflsI8KICAgICAgZG8gewogICAgICAgIHggPSB0aGlzLmdldFJhbmRvbVBvc2l0aW9uKHRoaXMuY29udGFpbmVyV2lkdGggLSBzaXplKTsKICAgICAgICB5ID0gdGhpcy5nZXRSYW5kb21Qb3NpdGlvbih0aGlzLmNvbnRhaW5lckhlaWdodCAtIHNpemUpOwogICAgICAgIGxldCBvdmVybGFwID0gZmFsc2U7CiAgICAgICAgdGhpcy5idWJibGVzLmZvckVhY2goYnViYmxlID0+IHsKICAgICAgICAgIGNvbnN0IGR4ID0gTWF0aC5hYnMoeCAtIGJ1YmJsZS54IC0gYnViYmxlLnNpemUgLyAyKTsKICAgICAgICAgIGNvbnN0IGR5ID0gTWF0aC5hYnMoeSAtIGJ1YmJsZS55IC0gYnViYmxlLnNpemUgLyAyKTsKICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTsKICAgICAgICAgIGlmIChkaXN0YW5jZSA8IChidWJibGUuc2l6ZSArIHNpemUpIC8gMikgewogICAgICAgICAgICBvdmVybGFwID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoIW92ZXJsYXApIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICB0cmllcysrOwogICAgICB9IHdoaWxlICh0cmllcyA8IG1heFRyaWVzKTsKICAgICAgaWYgKHRyaWVzIDwgbWF4VHJpZXMpIHsKICAgICAgICBuZXdCdWJibGUueCA9IHg7CiAgICAgICAgbmV3QnViYmxlLnkgPSB5OwogICAgICAgIG5ld0J1YmJsZS5zaXplID0gc2l6ZTsKICAgICAgICBuZXdCdWJibGUubnVtU2l6ZSA9IG51bVNpemU7CiAgICAgICAgdGhpcy5idWJibGVzLnB1c2gobmV3QnViYmxlKTsKICAgICAgfQogICAgfSwKICAgIGFwcGx5U2hha2VBbmltYXRpb24oKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBjb25zdCBjaXJjbGVzID0gdGhpcy4kcmVmcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNpcmNsZScpOwogICAgICAgIGNpcmNsZXMuZm9yRWFjaChjaXJjbGUgPT4gewogICAgICAgICAgZ3NhcC5mcm9tVG8oY2lyY2xlLCB7CiAgICAgICAgICAgIHk6IC0yCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHk6IDIsCiAgICAgICAgICAgIGVhc2U6ICJub25lIiwKICAgICAgICAgICAgeW95bzogdHJ1ZSwKICAgICAgICAgICAgcmVwZWF0OiAtMSwKICAgICAgICAgICAgZGVsYXk6IE1hdGgucmFuZG9tKCkKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRidXMuJG9uKCJzZW5kX3RhZ190YXNrX2lkIiwgdGFnVGFza0lkID0+IHsKICAgICAgdGhpcy5mZXRjaEJ1YmJsZURhdGEodGFnVGFza0lkKTsKICAgIH0pOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuJGJ1cy4kb2ZmKCJzZW5kX3RhZ190YXNrX2lkIik7CiAgfQp9Ow=="},{"version":3,"names":["gsap","name","data","bubbles","containerWidth","containerHeight","methods","fetchBubbleData","tagTaskId","$axios","get","then","response","$refs","container","offsetWidth","offsetHeight","forEach","item","addBubble","applyShakeAnimation","getRandomPosition","max","Math","random","newBubble","color","floor","maxTries","tries","x","y","size","count","numSize","overlap","bubble","dx","abs","dy","distance","sqrt","push","$nextTick","circles","querySelectorAll","circle","fromTo","ease","yoyo","repeat","delay","mounted","$bus","$on","beforeDestroy","$off"],"sources":["src/components/WXAnalyze/user.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\" ref=\"container\">\r\n      <div class=\"title-header\">来源 | 公众号</div>\r\n      <div v-for=\"(item, index) in bubbles\" :key=\"index\" class=\"circle\" :style=\"{ \r\n        left: item.x + 'px', \r\n        top: item.y + 'px', \r\n        width: item.size + 'px', \r\n        height: item.size + 'px', \r\n        fontSize: item.numSize + 'px' ,\r\n        backgroundColor: item.color\r\n      }\">\r\n        <div class=\"num\">{{ item.count }}</div>\r\n        <!-- <div class=\"title-box\">\r\n          <div class=\"title\">{{ item.name }}</div>\r\n        </div> -->\r\n        <div class=\"title\">{{ item.name }}</div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import gsap from \"gsap\";\r\n  \r\n  export default {\r\n    name: \"BubbleChart\",\r\n    data() {\r\n      return {\r\n        bubbles: [],\r\n        containerWidth: 0,\r\n        containerHeight: 0\r\n      };\r\n    },\r\n    methods: {\r\n      fetchBubbleData(tagTaskId) {\r\n        this.$axios.get(`/user_wx?tag_task_id=${tagTaskId}`).then((response) => {\r\n          this.containerWidth = this.$refs.container.offsetWidth;\r\n          this.containerHeight = this.$refs.container.offsetHeight;\r\n          this.bubbles = [];\r\n          response.data.data.data.forEach(item => {\r\n            this.addBubble(item);\r\n          });\r\n          this.applyShakeAnimation();\r\n        });\r\n      },\r\n      getRandomPosition(max) {\r\n        return Math.random() * max; \r\n      },\r\n      addBubble(newBubble) {\r\n        newBubble.color = `rgb(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)})`;\r\n        const maxTries = 100;\r\n        let tries = 0;\r\n        let x, y;\r\n        const size = 30 + newBubble.count * 25; // 根据count调整气泡大小\r\n        const numSize = 10 + newBubble.count; // 根据count调整字体大小\r\n        do {\r\n          x = this.getRandomPosition(this.containerWidth - size);\r\n          y = this.getRandomPosition(this.containerHeight - size);\r\n          let overlap = false;\r\n          this.bubbles.forEach(bubble => {\r\n            const dx = Math.abs(x - bubble.x - bubble.size / 2);\r\n            const dy = Math.abs(y - bubble.y - bubble.size / 2);\r\n            const distance = Math.sqrt(dx * dx + dy * dy);\r\n            if (distance < (bubble.size + size) / 2) {\r\n              overlap = true;\r\n            }\r\n          });\r\n          if (!overlap) {\r\n            break;\r\n          }\r\n          tries++;\r\n        } while (tries < maxTries);\r\n        if (tries < maxTries) {\r\n          newBubble.x = x;\r\n          newBubble.y = y;\r\n          newBubble.size = size;\r\n          newBubble.numSize = numSize;\r\n          this.bubbles.push(newBubble);\r\n        }\r\n      },\r\n      applyShakeAnimation() {\r\n        this.$nextTick(() => {\r\n          const circles = this.$refs.container.querySelectorAll('.circle');\r\n          circles.forEach((circle) => {\r\n            gsap.fromTo(\r\n              circle,\r\n              { y: -2 },\r\n              {\r\n                y: 2,\r\n                ease: \"none\",\r\n                yoyo: true,\r\n                repeat: -1,\r\n                delay: Math.random(),\r\n              }\r\n            );\r\n          });\r\n        });\r\n      },\r\n    },\r\n    mounted() {\r\n      this.$bus.$on(\"send_tag_task_id\", (tagTaskId) => {\r\n        this.fetchBubbleData(tagTaskId);\r\n      });\r\n    },\r\n    beforeDestroy() {\r\n      this.$bus.$off(\"send_tag_task_id\");\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n .container {\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #f9f9f900;\r\n    border-radius: 10px;\r\n    border: 2px solid #4aaafac3; \r\n    box-shadow: 0 0 15px rgba(233, 229, 238, 0.304), 0 0 25px rgba(63, 154, 87, 0.4); \r\n    position: relative; \r\n  }\r\n  \r\n .title-header {\r\n    font-size: 15px;\r\n    text-align: left;\r\n    margin-bottom: 10px;\r\n    color: #ffffff;\r\n    z-index: 99;\r\n  }\r\n  \r\n .circle {\r\n    position: absolute;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 50%;\r\n    color: #fff;\r\n    text-align: center;\r\n  }\r\n  \r\n .num {\r\n    font-weight: bold;\r\n  }\r\n  \r\n\r\n .title {\r\n    font-size: 10px;\r\n    margin-top: 1px;\r\n    color: #ffffff;\r\n    text-decoration: none; \r\n    text-decoration-color: transparent;\r\n  }\r\n  \r\n  </style>"],"mappings":";;;AAqBA,OAAAA,IAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,cAAA;MACAC,eAAA;IACA;EACA;EACAC,OAAA;IACAC,gBAAAC,SAAA;MACA,KAAAC,MAAA,CAAAC,GAAA,yBAAAF,SAAA,IAAAG,IAAA,CAAAC,QAAA;QACA,KAAAR,cAAA,QAAAS,KAAA,CAAAC,SAAA,CAAAC,WAAA;QACA,KAAAV,eAAA,QAAAQ,KAAA,CAAAC,SAAA,CAAAE,YAAA;QACA,KAAAb,OAAA;QACAS,QAAA,CAAAV,IAAA,CAAAA,IAAA,CAAAA,IAAA,CAAAe,OAAA,CAAAC,IAAA;UACA,KAAAC,SAAA,CAAAD,IAAA;QACA;QACA,KAAAE,mBAAA;MACA;IACA;IACAC,kBAAAC,GAAA;MACA,OAAAC,IAAA,CAAAC,MAAA,KAAAF,GAAA;IACA;IACAH,UAAAM,SAAA;MACAA,SAAA,CAAAC,KAAA,UAAAH,IAAA,CAAAI,KAAA,CAAAJ,IAAA,CAAAC,MAAA,cAAAD,IAAA,CAAAI,KAAA,CAAAJ,IAAA,CAAAC,MAAA,cAAAD,IAAA,CAAAI,KAAA,CAAAJ,IAAA,CAAAC,MAAA;MACA,MAAAI,QAAA;MACA,IAAAC,KAAA;MACA,IAAAC,CAAA,EAAAC,CAAA;MACA,MAAAC,IAAA,QAAAP,SAAA,CAAAQ,KAAA;MACA,MAAAC,OAAA,QAAAT,SAAA,CAAAQ,KAAA;MACA;QACAH,CAAA,QAAAT,iBAAA,MAAAjB,cAAA,GAAA4B,IAAA;QACAD,CAAA,QAAAV,iBAAA,MAAAhB,eAAA,GAAA2B,IAAA;QACA,IAAAG,OAAA;QACA,KAAAhC,OAAA,CAAAc,OAAA,CAAAmB,MAAA;UACA,MAAAC,EAAA,GAAAd,IAAA,CAAAe,GAAA,CAAAR,CAAA,GAAAM,MAAA,CAAAN,CAAA,GAAAM,MAAA,CAAAJ,IAAA;UACA,MAAAO,EAAA,GAAAhB,IAAA,CAAAe,GAAA,CAAAP,CAAA,GAAAK,MAAA,CAAAL,CAAA,GAAAK,MAAA,CAAAJ,IAAA;UACA,MAAAQ,QAAA,GAAAjB,IAAA,CAAAkB,IAAA,CAAAJ,EAAA,GAAAA,EAAA,GAAAE,EAAA,GAAAA,EAAA;UACA,IAAAC,QAAA,IAAAJ,MAAA,CAAAJ,IAAA,GAAAA,IAAA;YACAG,OAAA;UACA;QACA;QACA,KAAAA,OAAA;UACA;QACA;QACAN,KAAA;MACA,SAAAA,KAAA,GAAAD,QAAA;MACA,IAAAC,KAAA,GAAAD,QAAA;QACAH,SAAA,CAAAK,CAAA,GAAAA,CAAA;QACAL,SAAA,CAAAM,CAAA,GAAAA,CAAA;QACAN,SAAA,CAAAO,IAAA,GAAAA,IAAA;QACAP,SAAA,CAAAS,OAAA,GAAAA,OAAA;QACA,KAAA/B,OAAA,CAAAuC,IAAA,CAAAjB,SAAA;MACA;IACA;IACAL,oBAAA;MACA,KAAAuB,SAAA;QACA,MAAAC,OAAA,QAAA/B,KAAA,CAAAC,SAAA,CAAA+B,gBAAA;QACAD,OAAA,CAAA3B,OAAA,CAAA6B,MAAA;UACA9C,IAAA,CAAA+C,MAAA,CACAD,MAAA,EACA;YAAAf,CAAA;UAAA,GACA;YACAA,CAAA;YACAiB,IAAA;YACAC,IAAA;YACAC,MAAA;YACAC,KAAA,EAAA5B,IAAA,CAAAC,MAAA;UACA,CACA;QACA;MACA;IACA;EACA;EACA4B,QAAA;IACA,KAAAC,IAAA,CAAAC,GAAA,qBAAA9C,SAAA;MACA,KAAAD,eAAA,CAAAC,SAAA;IACA;EACA;EACA+C,cAAA;IACA,KAAAF,IAAA,CAAAG,IAAA;EACA;AACA","ignoreList":[]}]}