{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\thread-loader\\dist\\cjs.js!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\babel-loader\\lib\\index.js!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\wbAnalyze\\Relation_graph.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\wbAnalyze\\Relation_graph.vue","mtime":1732591735658},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\babel.config.js","mtime":1732591727371},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1733210776367},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":1733210776030},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5tYXAuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInJlbGF0aW9uX2dyYXBoIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2F0ZWdvcmllczogW3sKICAgICAgICBuYW1lOiAi5q2j5bi455So5oi3IgogICAgICB9CiAgICAgIC8vIHsKICAgICAgLy8gICBuYW1lOiAi5rC05YabIiwKICAgICAgLy8gfSwKICAgICAgXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG15UmVsYXRpb25HcmFwaChpZCkgewogICAgICBsZXQgb3B0aW9uOwogICAgICBsZXQgbXlDaGFydCA9IHRoaXMuJGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2hvd19ncmFwaCIpKTsKICAgICAgbXlDaGFydC5zaG93TG9hZGluZygpOwogICAgICB0aGlzLiRheGlvcy5nZXQoInJlbGF0aW9uX2dyYXBoP3RhZ190YXNrX2lkPSIgKyBpZCkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEpOwogICAgICAgIGxldCBub2RlcyA9IHJlcy5kYXRhLmRhdGEubm9kZXNfbGlzdDsKICAgICAgICBmb3IgKGxldCBpbmRleCBpbiBub2RlcykgewogICAgICAgICAgbm9kZXNbaW5kZXhdLmlkID0gaW5kZXg7CiAgICAgICAgfQogICAgICAgIGxldCBsaW5rcyA9IHJlcy5kYXRhLmRhdGEubGlua3NfbGlzdDsKICAgICAgICBsaW5rcy5mb3JFYWNoKGxpbmsgPT4gewogICAgICAgICAgZm9yIChsZXQgbm9kZSBvZiBub2RlcykgewogICAgICAgICAgICBpZiAobGluay5zb3VyY2UgPT0gbm9kZS5uYW1lKSB7CiAgICAgICAgICAgICAgbGluay5zb3VyY2UgPSBub2RlLmlkOwogICAgICAgICAgICAgIG5vZGUuc2hvdyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGxpbmsudGFyZ2V0ID09IG5vZGUubmFtZSkgewogICAgICAgICAgICAgIGxpbmsudGFyZ2V0ID0gbm9kZS5pZDsKICAgICAgICAgICAgICBub2RlLnNob3cgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgbGV0IG5ld05vZGVzID0gW107CiAgICAgICAgZm9yIChsZXQgbiBpbiBub2RlcykgewogICAgICAgICAgaWYgKG5vZGVzW25dLnNob3cpIHsKICAgICAgICAgICAgbmV3Tm9kZXMucHVzaChub2Rlc1tuXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKG5ld05vZGVzKTsKICAgICAgICBjb25zb2xlLmxvZyhsaW5rcyk7CiAgICAgICAgbXlDaGFydC5oaWRlTG9hZGluZygpOwogICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgIG5vZGUubGFiZWwgPSB7CiAgICAgICAgICAgIHNob3c6IG5vZGUudmFsdWUgPiAxMAogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICBvcHRpb24gPSB7CiAgICAgICAgICB0aXRsZTogewogICAgICAgICAgICB0ZXh0OiAi55So5oi35YWz57O75Zu+IiwKICAgICAgICAgICAgc3VidGV4dDogIkRlZmF1bHQgbGF5b3V0IiwKICAgICAgICAgICAgdG9wOiAiYm90dG9tIiwKICAgICAgICAgICAgbGVmdDogInJpZ2h0IgogICAgICAgICAgfSwKICAgICAgICAgIHRvb2x0aXA6IHt9LAogICAgICAgICAgbGVnZW5kOiBbewogICAgICAgICAgICBkYXRhOiB0aGlzLmNhdGVnb3JpZXMubWFwKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGEubmFtZTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH1dLAogICAgICAgICAgYW5pbWF0aW9uRHVyYXRpb246IDE1MDAsCiAgICAgICAgICBhbmltYXRpb25FYXNpbmdVcGRhdGU6ICJxdWludGljSW5PdXQiLAogICAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgICBuYW1lOiAi55So5oi35YWz57O75Zu+IiwKICAgICAgICAgICAgdHlwZTogImdyYXBoIiwKICAgICAgICAgICAgbGF5b3V0OiAiZm9yY2UiLAogICAgICAgICAgICBkYXRhOiBuZXdOb2RlcywKICAgICAgICAgICAgbGlua3M6IGxpbmtzLAogICAgICAgICAgICBjYXRlZ29yaWVzOiB0aGlzLmNhdGVnb3JpZXMsCiAgICAgICAgICAgIHJvYW06IHRydWUsCiAgICAgICAgICAgIGxhYmVsOiB7CiAgICAgICAgICAgICAgcG9zaXRpb246ICJyaWdodCIsCiAgICAgICAgICAgICAgZm9ybWF0dGVyOiAie2J9IgogICAgICAgICAgICB9LAogICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICBjb2xvcjogInNvdXJjZSIsCiAgICAgICAgICAgICAgY3VydmVuZXNzOiAwLjMKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZW1waGFzaXM6IHsKICAgICAgICAgICAgICBmb2N1czogImFkamFjZW5jeSIsCiAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH1dCiAgICAgICAgfTsKICAgICAgICBteUNoYXJ0LnNldE9wdGlvbihvcHRpb24pOwogICAgICB9KTsKICAgICAgb3B0aW9uICYmIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbik7CiAgICB9LAogICAgVG9QZXJzb25MaXN0KCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi9wZXJzb25fbGlzdCIsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHRhZ190YXNrX2lkOiB0aGlzLnRpZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IHJlcyA9IEFycmF5LmZyb20obmV3IEFycmF5KDUpLCAoKSA9PiBbXSk7CiAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgdGhpcy4kYnVzLiRvbigic2VuZF90YWdfdGFza19pZCIsIHRhZ190YXNrX2lkID0+IHsKICAgICAgY29uc29sZS5sb2coIui/memHjOaYr+WFs+ezu+Wbvue7hOS7tizmlLbliLDkuobmlbDmja46IiwgdGFnX3Rhc2tfaWQpOwogICAgICB0aGlzLnRpZCA9IHRhZ190YXNrX2lkOwogICAgICB0aGlzLm15UmVsYXRpb25HcmFwaCh0YWdfdGFza19pZCk7CiAgICB9KTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLiRidXMuJG9mZigic2VuZF90YWdfdGFza19pZCIpOwogIH0KfTs="},{"version":3,"names":["name","data","categories","methods","myRelationGraph","id","option","myChart","$echarts","init","document","getElementById","showLoading","$axios","get","then","res","console","log","nodes","nodes_list","index","links","links_list","forEach","link","node","source","show","target","newNodes","n","push","hideLoading","label","value","title","text","subtext","top","left","tooltip","legend","map","a","animationDuration","animationEasingUpdate","series","type","layout","roam","position","formatter","lineStyle","color","curveness","emphasis","focus","width","setOption","ToPersonList","$router","path","query","tag_task_id","tid","mounted","Array","from","$bus","$on","beforeDestroy","$off"],"sources":["src/components/wbAnalyze/Relation_graph.vue"],"sourcesContent":["<template>\r\n  <div class=\"relation_graph\">\r\n    <div class=\"relation_graph_top\" @click=\"ToPersonList\">\r\n      <svg class=\"icon\" aria-hidden=\"true\">\r\n        <use xlink:href=\"#icon-wangluoguanxitu\"></use>\r\n      </svg>\r\n      <span>关系图</span>\r\n    </div>\r\n    <div id=\"show_graph\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"relation_graph\",\r\n  data() {\r\n    return {\r\n      categories: [\r\n        {\r\n          name: \"正常用户\",\r\n        },\r\n        // {\r\n        //   name: \"水军\",\r\n        // },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    myRelationGraph(id) {\r\n      let option;\r\n      let myChart = this.$echarts.init(document.getElementById(\"show_graph\"));\r\n      myChart.showLoading();\r\n      this.$axios.get(\"relation_graph?tag_task_id=\"+id).then((res) => {\r\n        console.log(res.data.data)\r\n        let nodes = res.data.data.nodes_list;\r\n        for (let index in nodes) {\r\n          nodes[index].id = index;\r\n        }\r\n        let links = res.data.data.links_list;\r\n        links.forEach((link) => {\r\n          for (let node of nodes) {\r\n            if (link.source == node.name) {\r\n              link.source = node.id;\r\n              node.show = true;\r\n            }\r\n            if (link.target == node.name) {\r\n              link.target = node.id;\r\n              node.show = true;\r\n            }\r\n          }\r\n        });\r\n        let newNodes = [];\r\n        for(let n in nodes){\r\n          if(nodes[n].show){\r\n            newNodes.push(nodes[n])\r\n          }\r\n        }\r\n        console.log(newNodes);\r\n        console.log(links);\r\n        myChart.hideLoading();\r\n        nodes.forEach(function (node) {\r\n          node.label = {\r\n            show: node.value > 10,\r\n          };\r\n        });\r\n        option = {\r\n          title: {\r\n            text: \"用户关系图\",\r\n            subtext: \"Default layout\",\r\n            top: \"bottom\",\r\n            left: \"right\",\r\n          },\r\n          tooltip: {},\r\n          legend: [\r\n            {\r\n              data: this.categories.map(function (a) {\r\n                return a.name;\r\n              }),\r\n            },\r\n          ],\r\n          animationDuration: 1500,\r\n          animationEasingUpdate: \"quinticInOut\",\r\n          series: [\r\n            {\r\n              name: \"用户关系图\",\r\n              type: \"graph\",\r\n              layout: \"force\",\r\n              data: newNodes,\r\n              links: links,\r\n              categories: this.categories,\r\n              roam: true,\r\n              label: {\r\n                position: \"right\",\r\n                formatter: \"{b}\",\r\n              },\r\n              lineStyle: {\r\n                color: \"source\",\r\n                curveness: 0.3,\r\n              },\r\n              emphasis: {\r\n                focus: \"adjacency\",\r\n                lineStyle: {\r\n                  width: 10,\r\n                },\r\n              },\r\n            },\r\n          ],\r\n        };\r\n        myChart.setOption(option);\r\n      });\r\n      option && myChart.setOption(option);\r\n    },\r\n    ToPersonList() {\r\n      this.$router.push({\r\n        path: \"/person_list\",\r\n        query: {\r\n          tag_task_id: this.tid,\r\n        },\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    let res = Array.from(new Array(5), () => []);\r\n    console.log(res);\r\n    this.$bus.$on(\"send_tag_task_id\", (tag_task_id) => {\r\n      console.log(\"这里是关系图组件,收到了数据:\", tag_task_id);\r\n      this.tid = tag_task_id;\r\n      this.myRelationGraph(tag_task_id);\r\n\r\n    });\r\n  },\r\n  beforeDestroy() {\r\n    this.$bus.$off(\"send_tag_task_id\");\r\n  },\r\n};\r\n</script>\r\n\r\n<style scpoed>\r\n.relation_graph_top {\r\n  margin-left: 10px;\r\n}\r\n.relation_graph {\r\n  background-color: #fff;\r\n  position: absolute;\r\n  top: 31%;\r\n  width: 100%;\r\n  height: 68%;\r\n}\r\n#show_graph {\r\n  height: 500px;\r\n  width: 400px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]}]}