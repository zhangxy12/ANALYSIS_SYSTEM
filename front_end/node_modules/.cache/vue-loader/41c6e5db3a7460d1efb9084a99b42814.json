{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\mainscreen\\allCount.vue?vue&type=style&index=0&id=9f06de8c&prod&scoped=true&lang=css","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\mainscreen\\allCount.vue","mtime":1743662450325},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\css-loader\\dist\\cjs.js","mtime":1733210773580},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1733210773701},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\postcss-loader\\src\\index.js","mtime":1733210773504},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpoMnsNCiAgICBmb250LXNpemU6IDE4cHg7DQogICAgZm9udC13ZWlnaHQ6IDcwMDsNCn0NCi5wbGF0Zm9ybS1hcnRpY2xlLWNvdW50IHsNCiAgICBtYXJnaW4tbGVmdDogMjBweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1MDA7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KfQ0KDQoucGxhdGZvcm0taXRlbXMtd3JhcHBlciB7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC13cmFwOiB3cmFwOw0KICAgIGdhcDogMjBweDsNCn0NCg0KLnBsYXRmb3JtLWl0ZW0gew0KICAgIC8qIOenu+mZpOWOn+adpeeahCBtYXJnaW4tYm90dG9tICovDQp9DQoNCi5lcnJvci1tZXNzYWdlIHsNCiAgICBjb2xvcjogcmVkOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBtYXJnaW4tdG9wOiAxMHB4Ow0KfQ0KDQoubG9hZGluZyB7DQogICAgY29sb3I6ICM5OTk7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIG1hcmdpbi10b3A6IDEwcHg7DQp9DQo="},{"version":3,"sources":["allCount.vue"],"names":[],"mappings":";AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"allCount.vue","sourceRoot":"src/components/mainscreen","sourcesContent":["<template>\r\n    <div class=\"platform-article-count\">\r\n        <h2><i class=\"fa fa-cubes\"></i>     今日舆情数量（千）</h2>\r\n        <div class=\"platform-items-wrapper\">\r\n            <div class=\"platform-item\" v-for=\"(count, platform) in platformArticleCounts\" :key=\"platform\">\r\n                <span>{{ platformNames[platform] }}</span>\r\n                <dv-decoration-9 style=\"width:70px;height:70px;\" dur=5>\r\n                    <span>{{ count }}</span>\r\n                </dv-decoration-9>\r\n            </div>\r\n        </div>\r\n        <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n        <div class=\"loading\" v-if=\"isLoading\">加载中...</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { Message } from 'element-ui';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            platformArticleCounts: {\r\n                wechat: 0,\r\n                weibo: 0,\r\n                renmin: 0,\r\n                tieba: 0\r\n            },\r\n            platformNames: {\r\n                wechat: '微信',\r\n                weibo: '微博',\r\n                renmin: '人民网',\r\n                tieba: '贴吧'\r\n            },\r\n            cursor: 1,\r\n            isLoading: false,\r\n            errorMessage: '',\r\n            hasMoreData: true\r\n        };\r\n    },\r\n    mounted() {\r\n        this.fetchArticleCounts();\r\n    },\r\n    methods: {\r\n        async fetchArticleCounts() {\r\n            this.isLoading = true;\r\n            this.errorMessage = '';\r\n            this.hasMoreData = true;\r\n            this.cursor = 1;\r\n\r\n            try {\r\n                const response = await axios.get(`/main/all_multi_search?cursor=${this.cursor}`);\r\n                console.log(response);\r\n                if (response.data.code === 0) {\r\n                    const pageData = response.data.data;\r\n                    this.platformArticleCounts = {\r\n                        wechat: pageData.source_count.wechat,\r\n                        weibo: pageData.source_count.weibo,\r\n                        renmin: pageData.source_count.renmin,\r\n                        tieba: pageData.source_count.tieba\r\n                    };\r\n                } else {\r\n                    this.errorMessage = response.data.message;\r\n                    Message.warning(this.errorMessage);\r\n                }\r\n            } catch (error) {\r\n                if (error.response) {\r\n                    this.errorMessage = `请求失败，状态码: ${error.response.status}`;\r\n                    Message.error(this.errorMessage);\r\n                } else if (error.request) {\r\n                    this.errorMessage = '网络错误，无法连接到服务器';\r\n                    Message.error(this.errorMessage);\r\n                } else {\r\n                    this.errorMessage = '请求设置错误，请检查代码';\r\n                    Message.error(this.errorMessage);\r\n                }\r\n                console.error('数据请求出错:', error);\r\n            }\r\n\r\n            this.isLoading = false;\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nh2{\r\n    font-size: 18px;\r\n    font-weight: 700;\r\n}\r\n.platform-article-count {\r\n    margin-left: 20px;\r\n    background-color: #f5f5f500;\r\n    border-radius: 5px;\r\n}\r\n\r\n.platform-items-wrapper {\r\n    text-align: center;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 20px;\r\n}\r\n\r\n.platform-item {\r\n    /* 移除原来的 margin-bottom */\r\n}\r\n\r\n.error-message {\r\n    color: red;\r\n    text-align: center;\r\n    margin-top: 10px;\r\n}\r\n\r\n.loading {\r\n    color: #999;\r\n    text-align: center;\r\n    margin-top: 10px;\r\n}\r\n</style>    "]}]}