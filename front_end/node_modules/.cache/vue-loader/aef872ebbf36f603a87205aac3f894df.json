{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\mainscreen\\allCount.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\mainscreen\\allCount.vue","mtime":1743662450325},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":1733210776030},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHBsYXRmb3JtQXJ0aWNsZUNvdW50czogew0KICAgICAgICAgICAgICAgIHdlY2hhdDogMCwNCiAgICAgICAgICAgICAgICB3ZWlibzogMCwNCiAgICAgICAgICAgICAgICByZW5taW46IDAsDQogICAgICAgICAgICAgICAgdGllYmE6IDANCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBwbGF0Zm9ybU5hbWVzOiB7DQogICAgICAgICAgICAgICAgd2VjaGF0OiAn5b6u5L+hJywNCiAgICAgICAgICAgICAgICB3ZWlibzogJ+W+ruWNmicsDQogICAgICAgICAgICAgICAgcmVubWluOiAn5Lq65rCR572RJywNCiAgICAgICAgICAgICAgICB0aWViYTogJ+i0tOWQpycNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBjdXJzb3I6IDEsDQogICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLA0KICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiAnJywNCiAgICAgICAgICAgIGhhc01vcmVEYXRhOiB0cnVlDQogICAgICAgIH07DQogICAgfSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgICB0aGlzLmZldGNoQXJ0aWNsZUNvdW50cygpOw0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBhc3luYyBmZXRjaEFydGljbGVDb3VudHMoKSB7DQogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7DQogICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICcnOw0KICAgICAgICAgICAgdGhpcy5oYXNNb3JlRGF0YSA9IHRydWU7DQogICAgICAgICAgICB0aGlzLmN1cnNvciA9IDE7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYC9tYWluL2FsbF9tdWx0aV9zZWFyY2g/Y3Vyc29yPSR7dGhpcy5jdXJzb3J9YCk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOw0KICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZURhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucGxhdGZvcm1BcnRpY2xlQ291bnRzID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgd2VjaGF0OiBwYWdlRGF0YS5zb3VyY2VfY291bnQud2VjaGF0LA0KICAgICAgICAgICAgICAgICAgICAgICAgd2VpYm86IHBhZ2VEYXRhLnNvdXJjZV9jb3VudC53ZWlibywNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbm1pbjogcGFnZURhdGEuc291cmNlX2NvdW50LnJlbm1pbiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRpZWJhOiBwYWdlRGF0YS5zb3VyY2VfY291bnQudGllYmENCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZTsNCiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZS53YXJuaW5nKHRoaXMuZXJyb3JNZXNzYWdlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGDor7fmsYLlpLHotKXvvIznirbmgIHnoIE6ICR7ZXJyb3IucmVzcG9uc2Uuc3RhdHVzfWA7DQogICAgICAgICAgICAgICAgICAgIE1lc3NhZ2UuZXJyb3IodGhpcy5lcnJvck1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IucmVxdWVzdCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICfnvZHnu5zplJnor6/vvIzml6Dms5Xov57mjqXliLDmnI3liqHlmagnOw0KICAgICAgICAgICAgICAgICAgICBNZXNzYWdlLmVycm9yKHRoaXMuZXJyb3JNZXNzYWdlKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICfor7fmsYLorr7nva7plJnor6/vvIzor7fmo4Dmn6Xku6PnoIEnOw0KICAgICAgICAgICAgICAgICAgICBNZXNzYWdlLmVycm9yKHRoaXMuZXJyb3JNZXNzYWdlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5pWw5o2u6K+35rGC5Ye66ZSZOicsIGVycm9yKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCn07DQo="},{"version":3,"sources":["allCount.vue"],"names":[],"mappings":";AAiBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"allCount.vue","sourceRoot":"src/components/mainscreen","sourcesContent":["<template>\r\n    <div class=\"platform-article-count\">\r\n        <h2><i class=\"fa fa-cubes\"></i>     今日舆情数量（千）</h2>\r\n        <div class=\"platform-items-wrapper\">\r\n            <div class=\"platform-item\" v-for=\"(count, platform) in platformArticleCounts\" :key=\"platform\">\r\n                <span>{{ platformNames[platform] }}</span>\r\n                <dv-decoration-9 style=\"width:70px;height:70px;\" dur=5>\r\n                    <span>{{ count }}</span>\r\n                </dv-decoration-9>\r\n            </div>\r\n        </div>\r\n        <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n        <div class=\"loading\" v-if=\"isLoading\">加载中...</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { Message } from 'element-ui';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            platformArticleCounts: {\r\n                wechat: 0,\r\n                weibo: 0,\r\n                renmin: 0,\r\n                tieba: 0\r\n            },\r\n            platformNames: {\r\n                wechat: '微信',\r\n                weibo: '微博',\r\n                renmin: '人民网',\r\n                tieba: '贴吧'\r\n            },\r\n            cursor: 1,\r\n            isLoading: false,\r\n            errorMessage: '',\r\n            hasMoreData: true\r\n        };\r\n    },\r\n    mounted() {\r\n        this.fetchArticleCounts();\r\n    },\r\n    methods: {\r\n        async fetchArticleCounts() {\r\n            this.isLoading = true;\r\n            this.errorMessage = '';\r\n            this.hasMoreData = true;\r\n            this.cursor = 1;\r\n\r\n            try {\r\n                const response = await axios.get(`/main/all_multi_search?cursor=${this.cursor}`);\r\n                console.log(response);\r\n                if (response.data.code === 0) {\r\n                    const pageData = response.data.data;\r\n                    this.platformArticleCounts = {\r\n                        wechat: pageData.source_count.wechat,\r\n                        weibo: pageData.source_count.weibo,\r\n                        renmin: pageData.source_count.renmin,\r\n                        tieba: pageData.source_count.tieba\r\n                    };\r\n                } else {\r\n                    this.errorMessage = response.data.message;\r\n                    Message.warning(this.errorMessage);\r\n                }\r\n            } catch (error) {\r\n                if (error.response) {\r\n                    this.errorMessage = `请求失败，状态码: ${error.response.status}`;\r\n                    Message.error(this.errorMessage);\r\n                } else if (error.request) {\r\n                    this.errorMessage = '网络错误，无法连接到服务器';\r\n                    Message.error(this.errorMessage);\r\n                } else {\r\n                    this.errorMessage = '请求设置错误，请检查代码';\r\n                    Message.error(this.errorMessage);\r\n                }\r\n                console.error('数据请求出错:', error);\r\n            }\r\n\r\n            this.isLoading = false;\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nh2{\r\n    font-size: 18px;\r\n    font-weight: 700;\r\n}\r\n.platform-article-count {\r\n    margin-left: 20px;\r\n    background-color: #f5f5f500;\r\n    border-radius: 5px;\r\n}\r\n\r\n.platform-items-wrapper {\r\n    text-align: center;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 20px;\r\n}\r\n\r\n.platform-item {\r\n    /* 移除原来的 margin-bottom */\r\n}\r\n\r\n.error-message {\r\n    color: red;\r\n    text-align: center;\r\n    margin-top: 10px;\r\n}\r\n\r\n.loading {\r\n    color: #999;\r\n    text-align: center;\r\n    margin-top: 10px;\r\n}\r\n</style>    "]}]}