{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\Rumor_ana\\post.vue?vue&type=style&index=0&id=775f1c86&scoped=true&lang=css","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\Rumor_ana\\post.vue","mtime":1741675953902},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\css-loader\\dist\\cjs.js","mtime":1733210773580},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1733210773701},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\postcss-loader\\src\\index.js","mtime":1733210773504},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5wb3N0IHsKICBjb2xvcjogI2ZmZmZmZjsKICAvKiBib3JkZXItcmFkaXVzOiA4cHg7ICovCiAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMSk7IC8qIOa3u+WKoOmYtOW9seaViOaenCAqLwogIGJvcmRlcjogMnB4IHNvbGlkICM2NjllZjNhNTsgLyog5rex6Imy6L655qGGICovCiAgYm9yZGVyLXJhZGl1czogMTBweDsKICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9CgoucG9zdF90b3AgewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBtYXJnaW4tYm90dG9tOiAxMHB4Owp9Cgouc3RhdC10aXRsZSB7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogIGZvbnQtc2l6ZTogMThweDsKICBmb250LXdlaWdodDogNjAwOwp9CgoucmFkaW8gewogIG1hcmdpbi1sZWZ0OiBhdXRvOwp9Cg=="},{"version":3,"sources":["post.vue"],"names":[],"mappings":";AAqRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"post.vue","sourceRoot":"src/components/Rumor_ana","sourcesContent":["<template>\r\n  <div class=\"post\" style=\"height: 50%;\">\r\n    <!-- <div class=\"post_top\">\r\n      <svg t=\"1741674708658\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"11844\" width=\"32\" height=\"32\"><path d=\"M187.35104 567.66464c0-0.57344 0.57344-2.2528 1.10592-3.8912 16.87552-84.62336 55.00928-174.20288 111.65696-174.20288 19.61984 0 53.37088 21.13536 101.86752 120.2176 8.72448 18.35008 17.408 37.2736 25.06752 55.0912 40.30464 90.68544 81.67424 184.7296 179.73248 184.7296 3.2768 0 7.08608 0 10.89536-0.53248 130.17088-8.88832 163.4304-152.49408 196.07552-291.6352 41.94304-180.8384 133.98016-229.25312 181.37088-229.25312V161.3824c-45.75232 0-95.8464 23.3472-136.72448 64.512-50.09408 50.09408-86.58944 122.4704-108.38016 215.94112-38.66624 165.84704-65.90464 235.9296-136.72448 240.4352-57.7536 3.8912-85.48352-52.87936-126.89408-145.28512a1740.3904 1740.3904 0 0 0-26.13248-57.30304c-35.4304-72.9088-85.52448-156.95872-160.1536-156.95872-117.10464 0-161.792 159.17056-175.9232 227.65568l-0.53248 1.6384 31.5392 7.7824 32.1536 7.7824z\" fill=\"#ffffff\" p-id=\"11845\"></path><path d=\"M68.07552 956.66176V0.57344H2.70336v1022.85312h1020.76416v-66.7648z\" fill=\"#ffffff\" p-id=\"11846\"></path></svg>\r\n      <span class=\"stat-title\"> 发布统计</span>\r\n      <div class=\"radio\">\r\n        <el-radio-group v-model=\"radio\">\r\n          <el-radio :label=\"1\">天</el-radio>\r\n          <el-radio :label=\"2\">月</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n    </div> -->\r\n    <div id=\"lineChart\" ref=\"timeLineChart\" style=\"width: 100%; height: 100%;\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport * as echarts from 'echarts';\r\n\r\nexport default {\r\n  name: \"post\",\r\n  data() {\r\n    return {\r\n      key: '',\r\n      timeData: {}\r\n    };\r\n  },\r\n  mounted() {\r\n    this.key = this.$route.query.key;\r\n    this.fetchData();\r\n  },\r\n  methods: {\r\n    async fetchData() {\r\n      try {\r\n        const response = await axios.get(`/rumor/rumorPost?key=${encodeURIComponent(this.key)}`);\r\n        console.log(response);\r\n        if (response.data.code === 0) {\r\n          const data = this.filterOneYearData(response.data.data);\r\n          this.timeData = this.calculateTimeData(data);\r\n          this.renderChart();\r\n        }\r\n      } catch (error) {\r\n        console.error('获取数据出错:', error);\r\n      }\r\n    },\r\n    filterOneYearData(data) {\r\n      const oneYearAgo = new Date();\r\n      oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);\r\n\r\n      const filteredData = {\r\n        renmin_date_count: {},\r\n        tieba_date_count: {},\r\n        wechat_date_count: {},\r\n        weibo_date_count: {}\r\n      };\r\n\r\n      const platforms = ['renmin_date_count', 'tieba_date_count', 'wechat_date_count', 'weibo_date_count'];\r\n      platforms.forEach(platform => {\r\n        for (const [date, count] of Object.entries(data[platform])) {\r\n          const currentDate = new Date(date);\r\n          if (currentDate >= oneYearAgo) {\r\n            filteredData[platform][date] = count;\r\n          }\r\n        }\r\n      });\r\n\r\n      return filteredData;\r\n    },\r\n    calculateTimeData(data) {\r\n      const renminData = data.renmin_date_count;\r\n      const tiebaData = data.tieba_date_count;\r\n      const wechatData = data.wechat_date_count;\r\n      const weiboData = data.weibo_date_count;\r\n\r\n      const allDates = new Set();\r\n      for (const platformData of [renminData, tiebaData, wechatData, weiboData]) {\r\n        for (const date in platformData) {\r\n          allDates.add(date);\r\n        }\r\n      }\r\n      const labels = Array.from(allDates).sort();\r\n\r\n      return {\r\n        labels: labels,\r\n        renmin: labels.map(date => renminData[date] || 0),\r\n        tieba: labels.map(date => tiebaData[date] || 0),\r\n        wechat: labels.map(date => wechatData[date] || 0),\r\n        weibo: labels.map(date => weiboData[date] || 0)\r\n      };\r\n    },\r\n    renderChart() {\r\n      const timeLineChart = echarts.init(this.$refs.timeLineChart);\r\n      const timeLineOption = {\r\n        title: {\r\n          text: '发布时间趋势',\r\n          left: 'center',\r\n          top: '3%',\r\n          bottom: '5%',\r\n          textStyle: {\r\n            color: '#fff'\r\n          }\r\n        },\r\n        tooltip: {\r\n          trigger: 'axis'\r\n        },\r\n        legend: {\r\n          data: ['人民网', '微博', '贴吧', '微信'],\r\n          top: '17%',\r\n          textStyle: {\r\n            color: '#fff'\r\n          }\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          boundaryGap: false,\r\n          data: this.timeData.labels,\r\n          axisLabel: {\r\n            color: '#fff'\r\n          }\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          axisLabel: {\r\n            formatter: '{value} 条',\r\n            color: '#fff'\r\n          },\r\n          axisTick: {\r\n            alignWithLabel: true\r\n          },\r\n          minInterval: 1 // 设置最小刻度间隔为1，确保显示整数\r\n        },\r\n        grid: {\r\n          top: '30%',\r\n          left: '10%',\r\n          right: '8%',\r\n          bottom: '20%'\r\n        },\r\n        series: [ \r\n          {\r\n            name: '人民网',\r\n            type: 'line',\r\n            data: this.timeData.renmin,\r\n            smooth: true,\r\n            color: '##a4e2c6',\r\n            areaStyle: {\r\n              color: {\r\n                type: 'linear',\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [\r\n                  {\r\n                    offset: 0,\r\n                    color: 'rgba(164, 226, 198, 0.5)' // 与折线颜色相同，半透明\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: 'rgba(164, 226, 198, 0)' // 完全透明\r\n                  }\r\n                ]\r\n              }\r\n            }\r\n          },\r\n          {\r\n            name: '微博',\r\n            type: 'line',\r\n            data: this.timeData.weibo,\r\n            smooth: true,\r\n            color: '#48c0a3',\r\n            areaStyle: {\r\n              color: {\r\n                type: 'linear',\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [\r\n                  {\r\n                    offset: 0,\r\n                    color: 'rgba(72, 192, 163, 0.5)'\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: 'rgba(72, 192, 163, 0)'\r\n                  }\r\n                ]\r\n              }\r\n            }\r\n          },\r\n          {\r\n            name: '贴吧',\r\n            type: 'line',\r\n            data: this.timeData.tieba,\r\n            smooth: true,\r\n            color: '#549688',\r\n            areaStyle: {\r\n              color: {\r\n                type: 'linear',\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [\r\n                  {\r\n                    offset: 0,\r\n                    color: 'rgba(84, 150, 136, 0.5)'\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: 'rgba(84, 150, 136, 0)'\r\n                  }\r\n                ]\r\n              }\r\n            }\r\n          },\r\n          {\r\n            name: '微信',\r\n            type: 'line',\r\n            data: this.timeData.wechat,\r\n            smooth: true,\r\n            color:  '#1685a9',\r\n            areaStyle: {\r\n              color: {\r\n                type: 'linear',\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [\r\n                  {\r\n                    offset: 0,\r\n                    color: 'rgba(22, 133, 169, 0.5)'\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: 'rgba(22, 133, 169, 0)'\r\n                  }\r\n                ]\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      };\r\n      timeLineChart.setOption(timeLineOption);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  .post {\r\n    color: #ffffff;\r\n    /* border-radius: 8px; */\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* 添加阴影效果 */\r\n    border: 2px solid #669ef3a5; /* 深色边框 */\r\n    border-radius: 10px;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .post_top {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .stat-title {\r\n    margin-right: 10px;\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .radio {\r\n    margin-left: auto;\r\n  }\r\n</style>"]}]}