{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\blog_detail\\knowledge_graph.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\blog_detail\\knowledge_graph.vue","mtime":1734925219859},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":1733210776030},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAia25vd2xlZGdlX2dyYXBoIiwNCiAgICBkYXRhKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgdGltZXI6ICIiLA0KICAgICAgICBteUNoYXJ0OiAiIiwNCiAgICAgICAga25vd2xlZGdlX2dyYXBoX2RhdGE6IHsNCiAgICAgICAgICBlbnRpdGllczogW10sDQogICAgICAgICAgcmVsYXRpb25zaGlwczogW10sDQogICAgICAgIH0sDQogICAgICB9Ow0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgZ2V0S25vd2xlZGdlR3JhcGgoKSB7DQogICAgICAgIGxldCBxdWVyeSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Ow0KICAgICAgICB0aGlzLiRheGlvcw0KICAgICAgICAgIC5nZXQoDQogICAgICAgICAgICAiY29tbWVudC9rbm93bGVkZ2VfZ3JhcGg/dGFnX3Rhc2tfaWQ9IiArDQogICAgICAgICAgICAgIHF1ZXJ5LnRhZ190YXNrX2lkICsNCiAgICAgICAgICAgICAgIiZ3ZWlib19pZD0iICsNCiAgICAgICAgICAgICAgcXVlcnkud2VpYm9faWQNCiAgICAgICAgICApDQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgdGhpcy5rbm93bGVkZ2VfZ3JhcGhfZGF0YSA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKTsNCiAgICAgICAgICAgIHRoaXMubXlLbm93bGVkZ2VHcmFwaCgpOw0KICAgICAgICAgIH0pOw0KICAgICAgfSwNCiAgICAgIG15S25vd2xlZGdlR3JhcGgoKSB7DQogICAgbGV0IG9wdGlvbjsNCiAgICBpZiAodGhpcy5teUNoYXJ0ICE9IG51bGwgJiYgdGhpcy5teUNoYXJ0ICE9PSAiIiAmJiB0aGlzLm15Q2hhcnQgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICB0aGlzLm15Q2hhcnQuZGlzcG9zZSgpOyAvL+ino+WGs2VjaGFydHMgZG9t5bey57uP5Yqg6L2955qE5oql6ZSZDQogICAgfQ0KICAgIC8vIOWfuuS6juWHhuWkh+WlveeahGRvbe+8jOWIneWni+WMlmVjaGFydHPlrp7kvosNCiAgICB0aGlzLm15Q2hhcnQgPSB0aGlzLiRlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImdyYXBoX2tub3dsZWRnZSIpKTsNCg0KICAgIC8vIOaehOmAoOiKgueCuWlk5pig5bCEDQogICAgY29uc3QgZW50aXRpZXMgPSB0aGlzLmtub3dsZWRnZV9ncmFwaF9kYXRhLmVudGl0aWVzOw0KICAgIGNvbnN0IGVudGl0eU1hcCA9IHt9Ow0KICAgIGNvbnN0IG5vZGVzID0gZW50aXRpZXMubWFwKChlbnRpdHksIGluZGV4KSA9PiB7DQogICAgICAgIGVudGl0eU1hcFtlbnRpdHkubmFtZV0gPSBpbmRleDsgLy8g5L2/55SoIG5hbWUg5pig5bCEIGlkDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBpZDogaW5kZXgsDQogICAgICAgICAgICBuYW1lOiBlbnRpdHkubmFtZSwNCiAgICAgICAgICAgIGNhdGVnb3J5OiBlbnRpdHkudHlwZSwgLy8g5Y+v5qC55o2u57G75Z6L6L+b6KGM5YiG57uEDQogICAgICAgICAgICBsYWJlbDogew0KICAgICAgICAgICAgICAgIHNob3c6IHRydWUsDQogICAgICAgICAgICAgICAgcG9zaXRpb246ICJyaWdodCIsDQogICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAie2J9IiwgLy8g6IqC54K55ZCN56ewDQogICAgICAgICAgICB9LA0KICAgICAgICB9Ow0KICAgIH0pOw0KDQogICAgLy8g5bCGIHJlbGF0aW9uc2hpcHMg55qEIHNvdXJjZSDlkowgdGFyZ2V0IOaYoOWwhOWIsOato+ehrueahCBpZA0KICAgIGNvbnN0IGxpbmtzID0gdGhpcy5rbm93bGVkZ2VfZ3JhcGhfZGF0YS5yZWxhdGlvbnNoaXBzLm1hcCgocmVsKSA9PiB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBzb3VyY2U6IGVudGl0eU1hcFtyZWwuc291cmNlXSwgLy8g5LuOIGVudGl0eU1hcCDkuK3ojrflj5YgaWQNCiAgICAgICAgICAgIHRhcmdldDogZW50aXR5TWFwW3JlbC50YXJnZXRdLCAvLyDku44gZW50aXR5TWFwIOS4reiOt+WPliBpZA0KICAgICAgICAgICAgdmFsdWU6IHJlbC52YWx1ZSwgLy8g6I635Y+W6L6555qE5YWz57O7DQogICAgICAgICAgICBsYWJlbDogew0KICAgICAgICAgICAgICAgIHNob3c6IHRydWUsDQogICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAie2N9IiwgLy8g5pi+56S65YWz57O7DQogICAgICAgICAgICAgICAgcG9zaXRpb246ICJtaWRkbGUiLCAvLyDmmL7npLrlnKjovrnnmoTkuK3pl7QNCiAgICAgICAgICAgICAgICBmb250U2l6ZTogMTIsIC8vIOiuvue9rui+ueS4iuagh+etvueahOWtl+S9k+Wkp+Wwjw0KICAgICAgICAgICAgICAgIGNvbG9yOiAiIzMzMyIsIC8vIOiuvue9rui+ueS4iuagh+etvueahOminOiJsg0KICAgICAgICAgICAgfSwNCiAgICAgICAgfTsNCiAgICB9KTsNCg0KICAgIC8vIOWbvuihqOeahOmFjee9rumhuQ0KICAgIG9wdGlvbiA9IHsNCiAgICAgICAgdG9vbHRpcDogew0KICAgICAgICAgICAgc2hvdzogdHJ1ZSwNCiAgICAgICAgfSwNCiAgICAgICAgYW5pbWF0aW9uOiB0cnVlLA0KICAgICAgICBzZXJpZXM6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0eXBlOiAiZ3JhcGgiLA0KICAgICAgICAgICAgICAgIGxheW91dDogImZvcmNlIiwgLy8g5by65Yi25biD5bGADQogICAgICAgICAgICAgICAgcm9hbTogdHJ1ZSwgLy8g5piv5ZCm5YWB6K645ouW5ou9DQogICAgICAgICAgICAgICAgc3ltYm9sU2l6ZTogNTAsIC8vIOiKgueCueWkp+Wwjw0KICAgICAgICAgICAgICAgIGxhYmVsOiB7DQogICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsDQogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAicmlnaHQiLA0KICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6ICJ7Yn0iLCAvLyDoioLngrnlkI3np7ANCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGVkZ2VTeW1ib2w6IFsibm9uZSIsICJhcnJvdyJdLCAvLyDorr7nva7ovrnnmoTmoLflvI/vvIznrq3lpLQNCiAgICAgICAgICAgICAgICBlZGdlU3ltYm9sU2l6ZTogWzQsIDEwXSwNCiAgICAgICAgICAgICAgICBmb3JjZTogew0KICAgICAgICAgICAgICAgICAgICByZXB1bHNpb246IDIwMCwgLy8g6IqC54K55LmL6Ze055qE5pal5YqbDQogICAgICAgICAgICAgICAgICAgIGVkZ2VMZW5ndGg6IDE1MCwgLy8g6L6555qE6ZW/5bqmDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBkYXRhOiBub2RlcywNCiAgICAgICAgICAgICAgICBsaW5rczogbGlua3MsDQogICAgICAgICAgICAgICAgY2F0ZWdvcmllczogWw0KICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJCbG9nIiB9LA0KICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJVc2VyIiB9LA0KICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJDb21tZW50IiB9LA0KICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICJTZW50aW1lbnQiIH0sDQogICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICBlbXBoYXNpczogew0KICAgICAgICAgICAgICAgICAgICBmb2N1czogImFkamFjZW5jeSIsIC8vIOm8oOagh+aCrOWBnOaXtumrmOS6rui/nuaOpeeahOiKgueCuQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgbGluZVN0eWxlOiB7DQogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAiI2FhYSIsDQogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxLA0KICAgICAgICAgICAgICAgICAgICBjdXJ2ZW5lc3M6IDAuMywNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICB9Ow0KDQogICAgdGhpcy5teUNoYXJ0LnNldE9wdGlvbihvcHRpb24pOw0KfSwNCiAgICB9LA0KICAgIG1vdW50ZWQoKSB7DQogICAgICB0aGlzLmdldEtub3dsZWRnZUdyYXBoKCk7DQogICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgICB0aGlzLm15S25vd2xlZGdlR3JhcGgoKTsNCiAgICAgIH0sIDUwMDApOyAvLyDlrprml7bmm7TmlrDlm77ooagNCiAgICB9LA0KICAgIGJlZm9yZURlc3Ryb3koKSB7DQogICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOw0KICAgICAgdGhpcy50aW1lciA9IG51bGw7DQogICAgfSwNCiAgfTsNCiAg"},{"version":3,"sources":["knowledge_graph.vue"],"names":[],"mappings":";AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"knowledge_graph.vue","sourceRoot":"src/components/blog_detail","sourcesContent":["<template>\r\n    <div class=\"knowledge_graph\">\r\n      <div class=\"knowledge_graph_title\">博客评论知识图谱</div>\r\n      <div id=\"graph_knowledge\"></div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: \"knowledge_graph\",\r\n    data() {\r\n      return {\r\n        timer: \"\",\r\n        myChart: \"\",\r\n        knowledge_graph_data: {\r\n          entities: [],\r\n          relationships: [],\r\n        },\r\n      };\r\n    },\r\n    methods: {\r\n      getKnowledgeGraph() {\r\n        let query = this.$route.query;\r\n        this.$axios\r\n          .get(\r\n            \"comment/knowledge_graph?tag_task_id=\" +\r\n              query.tag_task_id +\r\n              \"&weibo_id=\" +\r\n              query.weibo_id\r\n          )\r\n          .then((res) => {\r\n            this.knowledge_graph_data = res.data.data;\r\n            console.log(res.data.data);\r\n            this.myKnowledgeGraph();\r\n          });\r\n      },\r\n      myKnowledgeGraph() {\r\n    let option;\r\n    if (this.myChart != null && this.myChart !== \"\" && this.myChart !== undefined) {\r\n        this.myChart.dispose(); //解决echarts dom已经加载的报错\r\n    }\r\n    // 基于准备好的dom，初始化echarts实例\r\n    this.myChart = this.$echarts.init(document.getElementById(\"graph_knowledge\"));\r\n\r\n    // 构造节点id映射\r\n    const entities = this.knowledge_graph_data.entities;\r\n    const entityMap = {};\r\n    const nodes = entities.map((entity, index) => {\r\n        entityMap[entity.name] = index; // 使用 name 映射 id\r\n        return {\r\n            id: index,\r\n            name: entity.name,\r\n            category: entity.type, // 可根据类型进行分组\r\n            label: {\r\n                show: true,\r\n                position: \"right\",\r\n                formatter: \"{b}\", // 节点名称\r\n            },\r\n        };\r\n    });\r\n\r\n    // 将 relationships 的 source 和 target 映射到正确的 id\r\n    const links = this.knowledge_graph_data.relationships.map((rel) => {\r\n        return {\r\n            source: entityMap[rel.source], // 从 entityMap 中获取 id\r\n            target: entityMap[rel.target], // 从 entityMap 中获取 id\r\n            value: rel.value, // 获取边的关系\r\n            label: {\r\n                show: true,\r\n                formatter: \"{c}\", // 显示关系\r\n                position: \"middle\", // 显示在边的中间\r\n                fontSize: 12, // 设置边上标签的字体大小\r\n                color: \"#333\", // 设置边上标签的颜色\r\n            },\r\n        };\r\n    });\r\n\r\n    // 图表的配置项\r\n    option = {\r\n        tooltip: {\r\n            show: true,\r\n        },\r\n        animation: true,\r\n        series: [\r\n            {\r\n                type: \"graph\",\r\n                layout: \"force\", // 强制布局\r\n                roam: true, // 是否允许拖拽\r\n                symbolSize: 50, // 节点大小\r\n                label: {\r\n                    show: true,\r\n                    position: \"right\",\r\n                    formatter: \"{b}\", // 节点名称\r\n                },\r\n                edgeSymbol: [\"none\", \"arrow\"], // 设置边的样式，箭头\r\n                edgeSymbolSize: [4, 10],\r\n                force: {\r\n                    repulsion: 200, // 节点之间的斥力\r\n                    edgeLength: 150, // 边的长度\r\n                },\r\n                data: nodes,\r\n                links: links,\r\n                categories: [\r\n                    { name: \"Blog\" },\r\n                    { name: \"User\" },\r\n                    { name: \"Comment\" },\r\n                    { name: \"Sentiment\" },\r\n                ],\r\n                emphasis: {\r\n                    focus: \"adjacency\", // 鼠标悬停时高亮连接的节点\r\n                },\r\n                lineStyle: {\r\n                    color: \"#aaa\",\r\n                    width: 1,\r\n                    curveness: 0.3,\r\n                },\r\n            },\r\n        ],\r\n    };\r\n\r\n    this.myChart.setOption(option);\r\n},\r\n    },\r\n    mounted() {\r\n      this.getKnowledgeGraph();\r\n      this.timer = setInterval(() => {\r\n        this.myKnowledgeGraph();\r\n      }, 5000); // 定时更新图表\r\n    },\r\n    beforeDestroy() {\r\n      clearInterval(this.timer);\r\n      this.timer = null;\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .knowledge_graph {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 5%;\r\n    background-color: #ffffff00;\r\n  color:#ffff;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* 添加阴影效果 */\r\n  border: 2px solid #669ef3a5; /* 深色边框 */\r\n  border-radius: 10px;\r\n  box-sizing: border-box;\r\n  \r\n  backdrop-filter: blur(10px); /* 添加磨砂玻璃效果 */\r\n  -webkit-backdrop-filter: blur(10px); /* Safari 兼容 */\r\n  overflow: hidden;\r\n  }\r\n  .knowledge_graph_title {\r\n    margin: 10px 20px;\r\n    padding: 5px;\r\n    font-weight: 600;\r\n    letter-spacing: 1px;\r\n  }\r\n  #graph_knowledge {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  </style>\r\n  "]}]}