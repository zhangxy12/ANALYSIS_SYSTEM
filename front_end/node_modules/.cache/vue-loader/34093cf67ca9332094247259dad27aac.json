{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\tb_detail\\mood_analyze_time.vue?vue&type=style&index=0&id=74364d3b&scoped=true&lang=css","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\tb_detail\\mood_analyze_time.vue","mtime":1740886641346},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\css-loader\\dist\\cjs.js","mtime":1733210773580},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1733210773701},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\postcss-loader\\src\\index.js","mtime":1733210773504},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouc2VudGltZW50X2FuYSB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQp9DQoNCi5zZW50aW1lbnRfYW5hX3RpdGxlIHsNCiAgY29sb3I6ICNmZmZmZmY7DQogIGZvbnQtc2l6ZTogMThweDsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogIG1hcmdpbi1ib3R0b206IDZweDsNCiAgbWFyZ2luLWxlZnQ6IDEwcHg7DQp9DQoNCi5zZW50aW1lbnRfYW5hX2NvbnRlbnRzIHsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogY2FsYygxMDAlIC0gNTBweCk7DQp9DQoNCi5zZW50aW1lbnRfY2hhcnQgew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KfQ0K"},{"version":3,"sources":["mood_analyze_time.vue"],"names":[],"mappings":";AA0JA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"mood_analyze_time.vue","sourceRoot":"src/components/tb_detail","sourcesContent":["<template>\r\n  <div class=\"sentiment_ana\">\r\n    <div class=\"sentiment_ana_title\">评论情感随时间变化</div>\r\n    <div class=\"sentiment_ana_contents\">\r\n      <div class=\"sentiment_chart\" ref=\"sentimentChart\" style=\"height: 265px;\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\n\r\nexport default {\r\n  name: \"sentiment_ana\",\r\n  data() {\r\n    return {\r\n      sentimentData: null\r\n    };\r\n  },\r\n  methods: {\r\n    // 获取当前博文的情感分析数据\r\n    getComments() {\r\n      let query = this.$route.query;\r\n      // 对 URL 参数进行编码\r\n      const encodedUrl = encodeURIComponent(query.url);\r\n      this.$axios\r\n        .get(\"comment/mood_tb\", {\r\n          params: {\r\n            tag_task_id: query.tag_task_id,\r\n            url: encodedUrl,\r\n          }\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n          // 获取情感分析数据\r\n          this.sentimentData = res.data.data.data.sentiment_by_date;\r\n\r\n          // 绘制折线图\r\n          this.drawSentimentChart();\r\n        })\r\n        .catch(error => {\r\n          console.error(\"获取评论情感分析失败:\", error);\r\n        });\r\n    },\r\n    drawSentimentChart() {\r\n      if (!this.sentimentData) return;\r\n\r\n      // 提取所有日期\r\n      const dates = Object.keys(this.sentimentData).sort();\r\n\r\n      // 提取不同情感类型\r\n      const sentimentTypes = new Set();\r\n      for (const date in this.sentimentData) {\r\n        for (const sentiment in this.sentimentData[date]) {\r\n          sentimentTypes.add(sentiment);\r\n        }\r\n      }\r\n\r\n      // 构建每种情感的评论数数组\r\n      const seriesData = [];\r\n      sentimentTypes.forEach(sentiment => {\r\n        const data = [];\r\n        dates.forEach(date => {\r\n          data.push(this.sentimentData[date][sentiment] || 0);\r\n        });\r\n\r\n        let areaColor;\r\n        let chineseName;\r\n        switch (sentiment) {\r\n          case 'positive':\r\n            chineseName = '积极';\r\n            areaColor = 'rgba(54, 162, 235, 0.3)'; // 积极情感的颜色，蓝色系\r\n            break;\r\n          case 'neutral':\r\n            chineseName = '中性';\r\n            areaColor = 'rgba(255, 205, 86, 0.3)'; // 中性情感的颜色，黄色系\r\n            break;\r\n          case 'negative':\r\n            chineseName = '消极';\r\n            areaColor = 'rgba(255, 99, 132, 0.3)'; // 消极情感的颜色，红色系\r\n            break;\r\n          default:\r\n            areaColor = 'rgba(153, 153, 153, 0.3)'; // 默认颜色\r\n        }\r\n\r\n        seriesData.push({\r\n          name: chineseName,\r\n          type: 'line',\r\n          data: data,\r\n          areaStyle: {\r\n            color: areaColor\r\n          },\r\n          lineStyle: {\r\n            color: areaColor.replace('0.3', '1') // 折线颜色与阴影颜色相同，但不透明\r\n          }\r\n        });\r\n      });\r\n\r\n      // 初始化 echarts 实例\r\n      const chart = echarts.init(this.$refs.sentimentChart);\r\n\r\n      // 配置项\r\n      const option = {\r\n        tooltip: {\r\n          trigger: 'axis'\r\n        },\r\n        legend: {\r\n          data: Array.from(sentimentTypes).map(sentiment => {\r\n            switch (sentiment) {\r\n              case 'positive':\r\n                return '积极';\r\n              case 'neutral':\r\n                return '中性';\r\n              case 'negative':\r\n                return '消极';\r\n              default:\r\n                return '其他';\r\n            }\r\n          }),\r\n          textStyle: {\r\n            color: '#fff' // 图例文字为白色\r\n          }\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          data: dates,\r\n          axisLabel: {\r\n            color: 'white' // 设置横坐标的字体颜色为白色\r\n          }\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          min: 0,\r\n          axisLabel: {\r\n            formatter: function (value) {\r\n              return Math.round(value); // 确保纵坐标为整数\r\n            },\r\n            color: 'white' // 设置纵坐标的字体颜色为白色\r\n          }\r\n        },\r\n        series: seriesData\r\n      };\r\n\r\n      // 使用配置项显示图表\r\n      chart.setOption(option);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getComments();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.sentiment_ana {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.sentiment_ana_title {\r\n  color: #ffffff;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-bottom: 6px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.sentiment_ana_contents {\r\n  width: 100%;\r\n  height: calc(100% - 50px);\r\n}\r\n\r\n.sentiment_chart {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>"]}]}