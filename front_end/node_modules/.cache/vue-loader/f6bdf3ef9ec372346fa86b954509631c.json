{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\WXAnalyze\\user.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\WXAnalyze\\user.vue","mtime":1741935837211},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":1733210776030},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCBnc2FwIGZyb20gImdzYXAiOw0KICANCiAgZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJCdWJibGVDaGFydCIsDQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGJ1YmJsZXM6IFtdLA0KICAgICAgICBjb250YWluZXJXaWR0aDogMCwNCiAgICAgICAgY29udGFpbmVySGVpZ2h0OiAwDQogICAgICB9Ow0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgZmV0Y2hCdWJibGVEYXRhKHRhZ1Rhc2tJZCkgew0KICAgICAgICB0aGlzLiRheGlvcy5nZXQoYC91c2VyX3d4P3RhZ190YXNrX2lkPSR7dGFnVGFza0lkfWApLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgdGhpcy5jb250YWluZXJXaWR0aCA9IHRoaXMuJHJlZnMuY29udGFpbmVyLm9mZnNldFdpZHRoOw0KICAgICAgICAgIHRoaXMuY29udGFpbmVySGVpZ2h0ID0gdGhpcy4kcmVmcy5jb250YWluZXIub2Zmc2V0SGVpZ2h0Ow0KICAgICAgICAgIHRoaXMuYnViYmxlcyA9IFtdOw0KICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5kYXRhLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICB0aGlzLmFkZEJ1YmJsZShpdGVtKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLmFwcGx5U2hha2VBbmltYXRpb24oKTsNCiAgICAgICAgfSk7DQogICAgICB9LA0KICAgICAgZ2V0UmFuZG9tUG9zaXRpb24obWF4KSB7DQogICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogbWF4OyANCiAgICAgIH0sDQogICAgICANCiAgICAgIGFkZEJ1YmJsZShuZXdCdWJibGUpIHsNCiAgY29uc3QgYmx1ZUNvbG9ycyA9IFsNCiAgICAnIzFFOTBGRicsIC8vIOmBk+Wlh+iTnQ0KICAgICcjMDBCRkZGJywgLy8g5rex5aSp6JOdDQogICAgJyM4N0NFRUInLCAvLyDlpKnok50NCiAgICAnI0FERDhFNicsIC8vIOa1heiTnQ0KICAgICcjNjQ5NUVEJywgLy8g55+i6L2m6I+K6JOdDQogICAgJyM0MTY5RTEnICAvLyDnmoflrrbok50NCiAgXTsNCiAgbmV3QnViYmxlLmNvbG9yID0gYmx1ZUNvbG9yc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBibHVlQ29sb3JzLmxlbmd0aCldOw0KICANCiAgY29uc3QgbWF4VHJpZXMgPSAxMDA7DQogIGxldCB0cmllcyA9IDA7DQogIGxldCB4LCB5Ow0KICBjb25zdCBzaXplID0gMzAgKyBuZXdCdWJibGUuY291bnQgKiAyMDsgLy8g5qC55o2uY291bnTosIPmlbTmsJTms6HlpKflsI8NCiAgY29uc3QgbnVtU2l6ZSA9IDEwICsgbmV3QnViYmxlLmNvdW50OyAvLyDmoLnmja5jb3VudOiwg+aVtOWtl+S9k+Wkp+Wwjw0KICBkbyB7DQogICAgeCA9IHRoaXMuZ2V0UmFuZG9tUG9zaXRpb24odGhpcy5jb250YWluZXJXaWR0aCAtIHNpemUpOw0KICAgIHkgPSB0aGlzLmdldFJhbmRvbVBvc2l0aW9uKHRoaXMuY29udGFpbmVySGVpZ2h0IC0gc2l6ZSk7DQogICAgbGV0IG92ZXJsYXAgPSBmYWxzZTsNCiAgICB0aGlzLmJ1YmJsZXMuZm9yRWFjaChidWJibGUgPT4gew0KICAgICAgY29uc3QgZHggPSBNYXRoLmFicyh4IC0gYnViYmxlLnggLSBidWJibGUuc2l6ZSAvIDIpOw0KICAgICAgY29uc3QgZHkgPSBNYXRoLmFicyh5IC0gYnViYmxlLnkgLSBidWJibGUuc2l6ZSAvIDIpOw0KICAgICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpOw0KICAgICAgaWYgKGRpc3RhbmNlIDwgKGJ1YmJsZS5zaXplICsgc2l6ZSkgKSB7DQogICAgICAgIG92ZXJsYXAgPSB0cnVlOw0KICAgICAgfQ0KICAgIH0pOw0KICAgIGlmICghb3ZlcmxhcCkgew0KICAgICAgYnJlYWs7DQogICAgfQ0KICAgIHRyaWVzKys7DQogIH0gd2hpbGUgKHRyaWVzIDwgbWF4VHJpZXMpOw0KICBpZiAodHJpZXMgPCBtYXhUcmllcykgew0KICAgIG5ld0J1YmJsZS54ID0geDsNCiAgICBuZXdCdWJibGUueSA9IHk7DQogICAgbmV3QnViYmxlLnNpemUgPSBzaXplOw0KICAgIG5ld0J1YmJsZS5udW1TaXplID0gbnVtU2l6ZTsNCiAgICB0aGlzLmJ1YmJsZXMucHVzaChuZXdCdWJibGUpOw0KICB9DQp9LA0KICAgICAgYXBwbHlTaGFrZUFuaW1hdGlvbigpIHsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIGNvbnN0IGNpcmNsZXMgPSB0aGlzLiRyZWZzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuY2lyY2xlJyk7DQogICAgICAgICAgY2lyY2xlcy5mb3JFYWNoKChjaXJjbGUpID0+IHsNCiAgICAgICAgICAgIGdzYXAuZnJvbVRvKA0KICAgICAgICAgICAgICBjaXJjbGUsDQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgICB7IHk6IC0yIH0sDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB5OiAyLA0KICAgICAgICAgICAgICAgIGVhc2U6ICJub25lIiwNCiAgICAgICAgICAgICAgICB5b3lvOiB0cnVlLA0KICAgICAgICAgICAgICAgIHJlcGVhdDogLTEsDQogICAgICAgICAgICAgICAgZGVsYXk6IE1hdGgucmFuZG9tKCksDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgfSwNCiAgICB9LA0KICAgIG1vdW50ZWQoKSB7DQogICAgICB0aGlzLiRidXMuJG9uKCJzZW5kX3RhZ190YXNrX2lkIiwgKHRhZ1Rhc2tJZCkgPT4gew0KICAgICAgICB0aGlzLmZldGNoQnViYmxlRGF0YSh0YWdUYXNrSWQpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBiZWZvcmVEZXN0cm95KCkgew0KICAgICAgdGhpcy4kYnVzLiRvZmYoInNlbmRfdGFnX3Rhc2tfaWQiKTsNCiAgICB9LA0KICB9Ow0KICA="},{"version":3,"sources":["user.vue"],"names":[],"mappings":";AAqBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user.vue","sourceRoot":"src/components/WXAnalyze","sourcesContent":["<template>\r\n    <div class=\"container\" ref=\"container\" style=\"height: 330px;\">\r\n      <div class=\"title-header\" ><i class=\"fa fa-bell\"></i>  来源 | 公众号</div>\r\n      <div v-for=\"(item, index) in bubbles\" :key=\"index\" class=\"circle\" :style=\"{ \r\n        left: item.x + 'px', \r\n        top: item.y + 'px', \r\n        width: item.size + 'px', \r\n        height: item.size + 'px', \r\n        fontSize: item.numSize + 'px' ,\r\n        backgroundColor: item.color\r\n      }\">\r\n        <div class=\"num\">{{ item.count }}</div>\r\n        <!-- <div class=\"title-box\">\r\n          <div class=\"title\">{{ item.name }}</div>\r\n        </div> -->\r\n        <h3>{{ item.name }}</h3>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import gsap from \"gsap\";\r\n  \r\n  export default {\r\n    name: \"BubbleChart\",\r\n    data() {\r\n      return {\r\n        bubbles: [],\r\n        containerWidth: 0,\r\n        containerHeight: 0\r\n      };\r\n    },\r\n    methods: {\r\n      fetchBubbleData(tagTaskId) {\r\n        this.$axios.get(`/user_wx?tag_task_id=${tagTaskId}`).then((response) => {\r\n          this.containerWidth = this.$refs.container.offsetWidth;\r\n          this.containerHeight = this.$refs.container.offsetHeight;\r\n          this.bubbles = [];\r\n          response.data.data.data.forEach(item => {\r\n            this.addBubble(item);\r\n          });\r\n          this.applyShakeAnimation();\r\n        });\r\n      },\r\n      getRandomPosition(max) {\r\n        return Math.random() * max; \r\n      },\r\n      \r\n      addBubble(newBubble) {\r\n  const blueColors = [\r\n    '#1E90FF', // 道奇蓝\r\n    '#00BFFF', // 深天蓝\r\n    '#87CEEB', // 天蓝\r\n    '#ADD8E6', // 浅蓝\r\n    '#6495ED', // 矢车菊蓝\r\n    '#4169E1'  // 皇家蓝\r\n  ];\r\n  newBubble.color = blueColors[Math.floor(Math.random() * blueColors.length)];\r\n  \r\n  const maxTries = 100;\r\n  let tries = 0;\r\n  let x, y;\r\n  const size = 30 + newBubble.count * 20; // 根据count调整气泡大小\r\n  const numSize = 10 + newBubble.count; // 根据count调整字体大小\r\n  do {\r\n    x = this.getRandomPosition(this.containerWidth - size);\r\n    y = this.getRandomPosition(this.containerHeight - size);\r\n    let overlap = false;\r\n    this.bubbles.forEach(bubble => {\r\n      const dx = Math.abs(x - bubble.x - bubble.size / 2);\r\n      const dy = Math.abs(y - bubble.y - bubble.size / 2);\r\n      const distance = Math.sqrt(dx * dx + dy * dy);\r\n      if (distance < (bubble.size + size) ) {\r\n        overlap = true;\r\n      }\r\n    });\r\n    if (!overlap) {\r\n      break;\r\n    }\r\n    tries++;\r\n  } while (tries < maxTries);\r\n  if (tries < maxTries) {\r\n    newBubble.x = x;\r\n    newBubble.y = y;\r\n    newBubble.size = size;\r\n    newBubble.numSize = numSize;\r\n    this.bubbles.push(newBubble);\r\n  }\r\n},\r\n      applyShakeAnimation() {\r\n        this.$nextTick(() => {\r\n          const circles = this.$refs.container.querySelectorAll('.circle');\r\n          circles.forEach((circle) => {\r\n            gsap.fromTo(\r\n              circle,\r\n              \r\n              { y: -2 },\r\n              {\r\n                y: 2,\r\n                ease: \"none\",\r\n                yoyo: true,\r\n                repeat: -1,\r\n                delay: Math.random(),\r\n              }\r\n            );\r\n          });\r\n        });\r\n      },\r\n    },\r\n    mounted() {\r\n      this.$bus.$on(\"send_tag_task_id\", (tagTaskId) => {\r\n        this.fetchBubbleData(tagTaskId);\r\n      });\r\n    },\r\n    beforeDestroy() {\r\n      this.$bus.$off(\"send_tag_task_id\");\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n .container {\r\n    width: 100%;\r\n    height: 600px;\r\n    background: #f9f9f900;\r\n    border-radius: 10px;\r\n    border: 2px solid #4aaafac3; \r\n    box-shadow: 0 0 15px rgba(233, 229, 238, 0.304), 0 0 25px rgba(63, 154, 87, 0.4); \r\n    position: relative; \r\n  }\r\n  \r\n .title-header {\r\n    font-size: 17px;\r\n    font-weight: 500;\r\n    text-align: left;\r\n    margin-bottom: 10px;\r\n    color: #ffffff;\r\n    z-index: 99;\r\n  }\r\n  \r\n .circle {\r\n  margin-top: 2%;\r\n  margin-left: 2%;\r\n  margin-right: 2%;\r\n    position: absolute;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 50%;\r\n    color: #fff;\r\n    text-align: center;\r\n  }\r\n  \r\n .num {\r\n    font-weight: bold;\r\n  }\r\n  \r\n\r\nh3 {\r\n    font-size: 10px;\r\n    margin-top: 1px;\r\n    color: #ffffff;\r\n    text-decoration: none; \r\n    text-decoration-color: transparent;\r\n  }\r\n  \r\n  </style>"]}]}