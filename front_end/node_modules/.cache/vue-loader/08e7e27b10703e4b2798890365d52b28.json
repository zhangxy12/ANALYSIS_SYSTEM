{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\blog_detail\\knowledge_graph.vue?vue&type=style&index=0&id=27d2b1ec&scoped=true&lang=css","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\blog_detail\\knowledge_graph.vue","mtime":1734925219859},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\css-loader\\dist\\cjs.js","mtime":1733210773580},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1733210773701},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\postcss-loader\\src\\index.js","mtime":1733210773504},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5rbm93bGVkZ2VfZ3JhcGggewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgdG9wOiA1JTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmMDA7CmNvbG9yOiNmZmZmOwpib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xKTsgLyog5re75Yqg6Zi05b2x5pWI5p6cICovCmJvcmRlcjogMnB4IHNvbGlkICM2NjllZjNhNTsgLyog5rex6Imy6L655qGGICovCmJvcmRlci1yYWRpdXM6IDEwcHg7CmJveC1zaXppbmc6IGJvcmRlci1ib3g7CgpiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7IC8qIOa3u+WKoOejqOeggueOu+eSg+aViOaenCAqLwotd2Via2l0LWJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTsgLyogU2FmYXJpIOWFvOWuuSAqLwpvdmVyZmxvdzogaGlkZGVuOwp9Ci5rbm93bGVkZ2VfZ3JhcGhfdGl0bGUgewogIG1hcmdpbjogMTBweCAyMHB4OwogIHBhZGRpbmc6IDVweDsKICBmb250LXdlaWdodDogNjAwOwogIGxldHRlci1zcGFjaW5nOiAxcHg7Cn0KI2dyYXBoX2tub3dsZWRnZSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKfQo="},{"version":3,"sources":["knowledge_graph.vue"],"names":[],"mappings":";AAsKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"knowledge_graph.vue","sourceRoot":"src/components/blog_detail","sourcesContent":["<template>\r\n    <div class=\"knowledge_graph\">\r\n      <div class=\"knowledge_graph_title\">博客评论知识图谱</div>\r\n      <div id=\"graph_knowledge\"></div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: \"knowledge_graph\",\r\n    data() {\r\n      return {\r\n        timer: \"\",\r\n        myChart: \"\",\r\n        knowledge_graph_data: {\r\n          entities: [],\r\n          relationships: [],\r\n        },\r\n      };\r\n    },\r\n    methods: {\r\n      getKnowledgeGraph() {\r\n        let query = this.$route.query;\r\n        this.$axios\r\n          .get(\r\n            \"comment/knowledge_graph?tag_task_id=\" +\r\n              query.tag_task_id +\r\n              \"&weibo_id=\" +\r\n              query.weibo_id\r\n          )\r\n          .then((res) => {\r\n            this.knowledge_graph_data = res.data.data;\r\n            console.log(res.data.data);\r\n            this.myKnowledgeGraph();\r\n          });\r\n      },\r\n      myKnowledgeGraph() {\r\n    let option;\r\n    if (this.myChart != null && this.myChart !== \"\" && this.myChart !== undefined) {\r\n        this.myChart.dispose(); //解决echarts dom已经加载的报错\r\n    }\r\n    // 基于准备好的dom，初始化echarts实例\r\n    this.myChart = this.$echarts.init(document.getElementById(\"graph_knowledge\"));\r\n\r\n    // 构造节点id映射\r\n    const entities = this.knowledge_graph_data.entities;\r\n    const entityMap = {};\r\n    const nodes = entities.map((entity, index) => {\r\n        entityMap[entity.name] = index; // 使用 name 映射 id\r\n        return {\r\n            id: index,\r\n            name: entity.name,\r\n            category: entity.type, // 可根据类型进行分组\r\n            label: {\r\n                show: true,\r\n                position: \"right\",\r\n                formatter: \"{b}\", // 节点名称\r\n            },\r\n        };\r\n    });\r\n\r\n    // 将 relationships 的 source 和 target 映射到正确的 id\r\n    const links = this.knowledge_graph_data.relationships.map((rel) => {\r\n        return {\r\n            source: entityMap[rel.source], // 从 entityMap 中获取 id\r\n            target: entityMap[rel.target], // 从 entityMap 中获取 id\r\n            value: rel.value, // 获取边的关系\r\n            label: {\r\n                show: true,\r\n                formatter: \"{c}\", // 显示关系\r\n                position: \"middle\", // 显示在边的中间\r\n                fontSize: 12, // 设置边上标签的字体大小\r\n                color: \"#333\", // 设置边上标签的颜色\r\n            },\r\n        };\r\n    });\r\n\r\n    // 图表的配置项\r\n    option = {\r\n        tooltip: {\r\n            show: true,\r\n        },\r\n        animation: true,\r\n        series: [\r\n            {\r\n                type: \"graph\",\r\n                layout: \"force\", // 强制布局\r\n                roam: true, // 是否允许拖拽\r\n                symbolSize: 50, // 节点大小\r\n                label: {\r\n                    show: true,\r\n                    position: \"right\",\r\n                    formatter: \"{b}\", // 节点名称\r\n                },\r\n                edgeSymbol: [\"none\", \"arrow\"], // 设置边的样式，箭头\r\n                edgeSymbolSize: [4, 10],\r\n                force: {\r\n                    repulsion: 200, // 节点之间的斥力\r\n                    edgeLength: 150, // 边的长度\r\n                },\r\n                data: nodes,\r\n                links: links,\r\n                categories: [\r\n                    { name: \"Blog\" },\r\n                    { name: \"User\" },\r\n                    { name: \"Comment\" },\r\n                    { name: \"Sentiment\" },\r\n                ],\r\n                emphasis: {\r\n                    focus: \"adjacency\", // 鼠标悬停时高亮连接的节点\r\n                },\r\n                lineStyle: {\r\n                    color: \"#aaa\",\r\n                    width: 1,\r\n                    curveness: 0.3,\r\n                },\r\n            },\r\n        ],\r\n    };\r\n\r\n    this.myChart.setOption(option);\r\n},\r\n    },\r\n    mounted() {\r\n      this.getKnowledgeGraph();\r\n      this.timer = setInterval(() => {\r\n        this.myKnowledgeGraph();\r\n      }, 5000); // 定时更新图表\r\n    },\r\n    beforeDestroy() {\r\n      clearInterval(this.timer);\r\n      this.timer = null;\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .knowledge_graph {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 5%;\r\n    background-color: #ffffff00;\r\n  color:#ffff;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* 添加阴影效果 */\r\n  border: 2px solid #669ef3a5; /* 深色边框 */\r\n  border-radius: 10px;\r\n  box-sizing: border-box;\r\n  \r\n  backdrop-filter: blur(10px); /* 添加磨砂玻璃效果 */\r\n  -webkit-backdrop-filter: blur(10px); /* Safari 兼容 */\r\n  overflow: hidden;\r\n  }\r\n  .knowledge_graph_title {\r\n    margin: 10px 20px;\r\n    padding: 5px;\r\n    font-weight: 600;\r\n    letter-spacing: 1px;\r\n  }\r\n  #graph_knowledge {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  </style>\r\n  "]}]}