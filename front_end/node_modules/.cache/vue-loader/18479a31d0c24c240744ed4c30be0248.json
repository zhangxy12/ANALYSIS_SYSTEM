{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\tb_detail\\mood_analyze_time.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\tb_detail\\mood_analyze_time.vue","mtime":1740886641346},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":1733210776030},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgKiBhcyBlY2hhcnRzIGZyb20gJ2VjaGFydHMnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJzZW50aW1lbnRfYW5hIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2VudGltZW50RGF0YTogbnVsbA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDojrflj5blvZPliY3ljZrmlofnmoTmg4XmhJ/liIbmnpDmlbDmja4NCiAgICBnZXRDb21tZW50cygpIHsNCiAgICAgIGxldCBxdWVyeSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Ow0KICAgICAgLy8g5a+5IFVSTCDlj4LmlbDov5vooYznvJbnoIENCiAgICAgIGNvbnN0IGVuY29kZWRVcmwgPSBlbmNvZGVVUklDb21wb25lbnQocXVlcnkudXJsKTsNCiAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgIC5nZXQoImNvbW1lbnQvbW9vZF90YiIsIHsNCiAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgIHRhZ190YXNrX2lkOiBxdWVyeS50YWdfdGFza19pZCwNCiAgICAgICAgICAgIHVybDogZW5jb2RlZFVybCwNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgIC8vIOiOt+WPluaDheaEn+WIhuaekOaVsOaNrg0KICAgICAgICAgIHRoaXMuc2VudGltZW50RGF0YSA9IHJlcy5kYXRhLmRhdGEuZGF0YS5zZW50aW1lbnRfYnlfZGF0ZTsNCg0KICAgICAgICAgIC8vIOe7mOWItuaKmOe6v+Wbvg0KICAgICAgICAgIHRoaXMuZHJhd1NlbnRpbWVudENoYXJ0KCk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgY29uc29sZS5lcnJvcigi6I635Y+W6K+E6K665oOF5oSf5YiG5p6Q5aSx6LSlOiIsIGVycm9yKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBkcmF3U2VudGltZW50Q2hhcnQoKSB7DQogICAgICBpZiAoIXRoaXMuc2VudGltZW50RGF0YSkgcmV0dXJuOw0KDQogICAgICAvLyDmj5Dlj5bmiYDmnInml6XmnJ8NCiAgICAgIGNvbnN0IGRhdGVzID0gT2JqZWN0LmtleXModGhpcy5zZW50aW1lbnREYXRhKS5zb3J0KCk7DQoNCiAgICAgIC8vIOaPkOWPluS4jeWQjOaDheaEn+exu+Weiw0KICAgICAgY29uc3Qgc2VudGltZW50VHlwZXMgPSBuZXcgU2V0KCk7DQogICAgICBmb3IgKGNvbnN0IGRhdGUgaW4gdGhpcy5zZW50aW1lbnREYXRhKSB7DQogICAgICAgIGZvciAoY29uc3Qgc2VudGltZW50IGluIHRoaXMuc2VudGltZW50RGF0YVtkYXRlXSkgew0KICAgICAgICAgIHNlbnRpbWVudFR5cGVzLmFkZChzZW50aW1lbnQpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8vIOaehOW7uuavj+enjeaDheaEn+eahOivhOiuuuaVsOaVsOe7hA0KICAgICAgY29uc3Qgc2VyaWVzRGF0YSA9IFtdOw0KICAgICAgc2VudGltZW50VHlwZXMuZm9yRWFjaChzZW50aW1lbnQgPT4gew0KICAgICAgICBjb25zdCBkYXRhID0gW107DQogICAgICAgIGRhdGVzLmZvckVhY2goZGF0ZSA9PiB7DQogICAgICAgICAgZGF0YS5wdXNoKHRoaXMuc2VudGltZW50RGF0YVtkYXRlXVtzZW50aW1lbnRdIHx8IDApOw0KICAgICAgICB9KTsNCg0KICAgICAgICBsZXQgYXJlYUNvbG9yOw0KICAgICAgICBsZXQgY2hpbmVzZU5hbWU7DQogICAgICAgIHN3aXRjaCAoc2VudGltZW50KSB7DQogICAgICAgICAgY2FzZSAncG9zaXRpdmUnOg0KICAgICAgICAgICAgY2hpbmVzZU5hbWUgPSAn56ev5p6BJzsNCiAgICAgICAgICAgIGFyZWFDb2xvciA9ICdyZ2JhKDU0LCAxNjIsIDIzNSwgMC4zKSc7IC8vIOenr+aegeaDheaEn+eahOminOiJsu+8jOiTneiJsuezuw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAnbmV1dHJhbCc6DQogICAgICAgICAgICBjaGluZXNlTmFtZSA9ICfkuK3mgKcnOw0KICAgICAgICAgICAgYXJlYUNvbG9yID0gJ3JnYmEoMjU1LCAyMDUsIDg2LCAwLjMpJzsgLy8g5Lit5oCn5oOF5oSf55qE6aKc6Imy77yM6buE6Imy57O7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlICduZWdhdGl2ZSc6DQogICAgICAgICAgICBjaGluZXNlTmFtZSA9ICfmtojmnoEnOw0KICAgICAgICAgICAgYXJlYUNvbG9yID0gJ3JnYmEoMjU1LCA5OSwgMTMyLCAwLjMpJzsgLy8g5raI5p6B5oOF5oSf55qE6aKc6Imy77yM57qi6Imy57O7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgYXJlYUNvbG9yID0gJ3JnYmEoMTUzLCAxNTMsIDE1MywgMC4zKSc7IC8vIOm7mOiupOminOiJsg0KICAgICAgICB9DQoNCiAgICAgICAgc2VyaWVzRGF0YS5wdXNoKHsNCiAgICAgICAgICBuYW1lOiBjaGluZXNlTmFtZSwNCiAgICAgICAgICB0eXBlOiAnbGluZScsDQogICAgICAgICAgZGF0YTogZGF0YSwNCiAgICAgICAgICBhcmVhU3R5bGU6IHsNCiAgICAgICAgICAgIGNvbG9yOiBhcmVhQ29sb3INCiAgICAgICAgICB9LA0KICAgICAgICAgIGxpbmVTdHlsZTogew0KICAgICAgICAgICAgY29sb3I6IGFyZWFDb2xvci5yZXBsYWNlKCcwLjMnLCAnMScpIC8vIOaKmOe6v+minOiJsuS4jumYtOW9seminOiJsuebuOWQjO+8jOS9huS4jemAj+aYjg0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KTsNCg0KICAgICAgLy8g5Yid5aeL5YyWIGVjaGFydHMg5a6e5L6LDQogICAgICBjb25zdCBjaGFydCA9IGVjaGFydHMuaW5pdCh0aGlzLiRyZWZzLnNlbnRpbWVudENoYXJ0KTsNCg0KICAgICAgLy8g6YWN572u6aG5DQogICAgICBjb25zdCBvcHRpb24gPSB7DQogICAgICAgIHRvb2x0aXA6IHsNCiAgICAgICAgICB0cmlnZ2VyOiAnYXhpcycNCiAgICAgICAgfSwNCiAgICAgICAgbGVnZW5kOiB7DQogICAgICAgICAgZGF0YTogQXJyYXkuZnJvbShzZW50aW1lbnRUeXBlcykubWFwKHNlbnRpbWVudCA9PiB7DQogICAgICAgICAgICBzd2l0Y2ggKHNlbnRpbWVudCkgew0KICAgICAgICAgICAgICBjYXNlICdwb3NpdGl2ZSc6DQogICAgICAgICAgICAgICAgcmV0dXJuICfnp6/mnoEnOw0KICAgICAgICAgICAgICBjYXNlICduZXV0cmFsJzoNCiAgICAgICAgICAgICAgICByZXR1cm4gJ+S4reaApyc7DQogICAgICAgICAgICAgIGNhc2UgJ25lZ2F0aXZlJzoNCiAgICAgICAgICAgICAgICByZXR1cm4gJ+a2iOaegSc7DQogICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgcmV0dXJuICflhbbku5YnOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pLA0KICAgICAgICAgIHRleHRTdHlsZTogew0KICAgICAgICAgICAgY29sb3I6ICcjZmZmJyAvLyDlm77kvovmloflrZfkuLrnmb3oibINCiAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHhBeGlzOiB7DQogICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywNCiAgICAgICAgICBkYXRhOiBkYXRlcywNCiAgICAgICAgICBheGlzTGFiZWw6IHsNCiAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnIC8vIOiuvue9ruaoquWdkOagh+eahOWtl+S9k+minOiJsuS4uueZveiJsg0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgeUF4aXM6IHsNCiAgICAgICAgICB0eXBlOiAndmFsdWUnLA0KICAgICAgICAgIG1pbjogMCwNCiAgICAgICAgICBheGlzTGFiZWw6IHsNCiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlKTsgLy8g56Gu5L+d57q15Z2Q5qCH5Li65pW05pWwDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgY29sb3I6ICd3aGl0ZScgLy8g6K6+572u57q15Z2Q5qCH55qE5a2X5L2T6aKc6Imy5Li655m96ImyDQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXJpZXM6IHNlcmllc0RhdGENCiAgICAgIH07DQoNCiAgICAgIC8vIOS9v+eUqOmFjee9rumhueaYvuekuuWbvuihqA0KICAgICAgY2hhcnQuc2V0T3B0aW9uKG9wdGlvbik7DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuZ2V0Q29tbWVudHMoKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["mood_analyze_time.vue"],"names":[],"mappings":";AAUA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mood_analyze_time.vue","sourceRoot":"src/components/tb_detail","sourcesContent":["<template>\r\n  <div class=\"sentiment_ana\">\r\n    <div class=\"sentiment_ana_title\">评论情感随时间变化</div>\r\n    <div class=\"sentiment_ana_contents\">\r\n      <div class=\"sentiment_chart\" ref=\"sentimentChart\" style=\"height: 265px;\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\n\r\nexport default {\r\n  name: \"sentiment_ana\",\r\n  data() {\r\n    return {\r\n      sentimentData: null\r\n    };\r\n  },\r\n  methods: {\r\n    // 获取当前博文的情感分析数据\r\n    getComments() {\r\n      let query = this.$route.query;\r\n      // 对 URL 参数进行编码\r\n      const encodedUrl = encodeURIComponent(query.url);\r\n      this.$axios\r\n        .get(\"comment/mood_tb\", {\r\n          params: {\r\n            tag_task_id: query.tag_task_id,\r\n            url: encodedUrl,\r\n          }\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n          // 获取情感分析数据\r\n          this.sentimentData = res.data.data.data.sentiment_by_date;\r\n\r\n          // 绘制折线图\r\n          this.drawSentimentChart();\r\n        })\r\n        .catch(error => {\r\n          console.error(\"获取评论情感分析失败:\", error);\r\n        });\r\n    },\r\n    drawSentimentChart() {\r\n      if (!this.sentimentData) return;\r\n\r\n      // 提取所有日期\r\n      const dates = Object.keys(this.sentimentData).sort();\r\n\r\n      // 提取不同情感类型\r\n      const sentimentTypes = new Set();\r\n      for (const date in this.sentimentData) {\r\n        for (const sentiment in this.sentimentData[date]) {\r\n          sentimentTypes.add(sentiment);\r\n        }\r\n      }\r\n\r\n      // 构建每种情感的评论数数组\r\n      const seriesData = [];\r\n      sentimentTypes.forEach(sentiment => {\r\n        const data = [];\r\n        dates.forEach(date => {\r\n          data.push(this.sentimentData[date][sentiment] || 0);\r\n        });\r\n\r\n        let areaColor;\r\n        let chineseName;\r\n        switch (sentiment) {\r\n          case 'positive':\r\n            chineseName = '积极';\r\n            areaColor = 'rgba(54, 162, 235, 0.3)'; // 积极情感的颜色，蓝色系\r\n            break;\r\n          case 'neutral':\r\n            chineseName = '中性';\r\n            areaColor = 'rgba(255, 205, 86, 0.3)'; // 中性情感的颜色，黄色系\r\n            break;\r\n          case 'negative':\r\n            chineseName = '消极';\r\n            areaColor = 'rgba(255, 99, 132, 0.3)'; // 消极情感的颜色，红色系\r\n            break;\r\n          default:\r\n            areaColor = 'rgba(153, 153, 153, 0.3)'; // 默认颜色\r\n        }\r\n\r\n        seriesData.push({\r\n          name: chineseName,\r\n          type: 'line',\r\n          data: data,\r\n          areaStyle: {\r\n            color: areaColor\r\n          },\r\n          lineStyle: {\r\n            color: areaColor.replace('0.3', '1') // 折线颜色与阴影颜色相同，但不透明\r\n          }\r\n        });\r\n      });\r\n\r\n      // 初始化 echarts 实例\r\n      const chart = echarts.init(this.$refs.sentimentChart);\r\n\r\n      // 配置项\r\n      const option = {\r\n        tooltip: {\r\n          trigger: 'axis'\r\n        },\r\n        legend: {\r\n          data: Array.from(sentimentTypes).map(sentiment => {\r\n            switch (sentiment) {\r\n              case 'positive':\r\n                return '积极';\r\n              case 'neutral':\r\n                return '中性';\r\n              case 'negative':\r\n                return '消极';\r\n              default:\r\n                return '其他';\r\n            }\r\n          }),\r\n          textStyle: {\r\n            color: '#fff' // 图例文字为白色\r\n          }\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          data: dates,\r\n          axisLabel: {\r\n            color: 'white' // 设置横坐标的字体颜色为白色\r\n          }\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          min: 0,\r\n          axisLabel: {\r\n            formatter: function (value) {\r\n              return Math.round(value); // 确保纵坐标为整数\r\n            },\r\n            color: 'white' // 设置纵坐标的字体颜色为白色\r\n          }\r\n        },\r\n        series: seriesData\r\n      };\r\n\r\n      // 使用配置项显示图表\r\n      chart.setOption(option);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getComments();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.sentiment_ana {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.sentiment_ana_title {\r\n  color: #ffffff;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-bottom: 6px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.sentiment_ana_contents {\r\n  width: 100%;\r\n  height: calc(100% - 50px);\r\n}\r\n\r\n.sentiment_chart {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>"]}]}