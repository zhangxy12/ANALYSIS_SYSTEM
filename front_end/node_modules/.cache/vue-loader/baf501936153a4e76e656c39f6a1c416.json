{"remainingRequest":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\WXAnalyze\\Search.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\src\\components\\WXAnalyze\\Search.vue","mtime":1743872589008},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1733210776367},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":1733210776030},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733210776394},{"path":"D:\\dasanshang\\NLP\\1\\Topic_and_user_profile_analysis_system\\code\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":1733210773580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAic2VhcmNoIiwNCiAgICBkYXRhKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAga2V5X3dvcmQ6ICIiLA0KICAgICAgICBzZWFyY2hSZXN1bHQ6IGZhbHNlLA0KICAgICAgICByZXN1bHRzOiBbXSwNCiAgICAgIH07DQogICAgfSwNCiAgICBmaWx0ZXJzOiB7DQogICAgICAvLyDov4fmu6Tlmag6IOaYvuekuuaRmOimgeeahOWJjTIwMOS4quWtl+espg0KICAgICAgc25pcHBldCh2YWx1ZSkgew0KICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMjAwKSByZXR1cm4gdmFsdWUuc2xpY2UoMCwgMjAwKSArICIuLi4iOw0KICAgICAgICByZXR1cm4gdmFsdWU7DQogICAgICB9LA0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgLy8g5pCc57Si5b6u5L+h5paH56ugDQogICAgICBzZWFyY2goKSB7DQogICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0ID0gZmFsc2U7ICAvLyDliJ3lp4vljJbml7blhYjpmpDol4/nu5PmnpwNCiAgICAgICAgaWYgKHRoaXMua2V5X3dvcmQudHJpbSgpID09PSAiIikgcmV0dXJuOyAvLyDlpoLmnpzlhbPplK7lrZfkuLrnqbrvvIzkuI3miafooYzmkJzntKINCiAgICAgICAgDQogICAgICAgIHRoaXMuJGF4aW9zDQogICAgICAgICAuZ2V0KGBzZWFyY2hfd3g/dGFnPSR7dGhpcy5rZXlfd29yZH0mY3Vyc29yPTFgKQ0KICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgICAgIC8vIOWkhOeQhuWQjuerr+i/lOWbnueahOaVsOaNrg0KICAgICAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmRhdGEpIHsNCiAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzID0gcmVzLmRhdGEuZGF0YS5tYXAoKGl0ZW0pID0+ICh7DQogICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsDQogICAgICAgICAgICAgICAgc3VtbWFyeTogaXRlbS5zdW1tYXJ5LA0KICAgICAgICAgICAgICAgIHNvdXJjZTogaXRlbS5zb3VyY2UsDQogICAgICAgICAgICAgICAgdGltZTogaXRlbS50aW1lLA0KICAgICAgICAgICAgICAgIHVybDogaXRlbS51cmwsDQogICAgICAgICAgICAgIH0pKTsNCiAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSZXN1bHQgPSB0cnVlOyAgLy8g5pWw5o2u5Yqg6L295a6M5ZCO5pi+56S657uT5p6cDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmVycm9yKCLmkJzntKLlpLHotKU6IiwgZXJyKTsNCiAgICAgICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0ID0gZmFsc2U7IC8vIOivt+axguWksei0peaXtumakOiXj+e7k+aenA0KICAgICAgICAgIH0pOw0KICAgICAgfSwNCiAgICAgIC8vIOa3u+WKoOS7u+WKoe+8iOWIhuaekO+8iQ0KICAgICAgYWRkKCkgew0KICAgICAgICANCiAgICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5YiG5p6Q6K+l6K+d6aKYLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsNCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuJGF4aW9zLmdldCgnYWRkX3Rhc2tfd3g/dGFnPScgKyB0aGlzLmtleV93b3JkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliIbmnpAnDQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogIH07DQogIA=="},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/components/WXAnalyze","sourcesContent":["<template>\r\n    <div class=\"search\">\r\n      <div class=\"input\">\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"key_word\"\r\n          class=\"key\"\r\n          placeholder=\"搜索话题\"\r\n        />\r\n      </div>\r\n      <div class=\"search_button\">\r\n        <button @click=\"search()\">搜索</button>\r\n      </div>\r\n      <div class=\"searchResult\" v-show=\"searchResult\">\r\n        <div class=\"title\">\r\n          有关{{ key_word }}的话题\r\n          <button @click=\"add()\" class=\"analyze-btn\">分析</button>\r\n          <div class=\"close\" @click=\"searchResult = false\">\r\n            <i class=\"el-icon-close\"></i>\r\n          </div>\r\n        </div>\r\n        <div class=\"result\" v-for=\"result in results\" :key=\"result.url\">\r\n          <div class=\"info\">\r\n            <div class=\"text_title\">{{ result.title }}</div>\r\n          </div>\r\n          <div class=\"text\">\r\n            {{ result.summary | snippet }}\r\n          </div>\r\n          <div class=\"msg\">\r\n            来源: {{ result.source }} | 时间: {{ result.time }}\r\n          </div>\r\n          <div class=\"url\">\r\n            <a :href=\"`https://weixin.sogou.com${result.url}`\" target=\"_blank\" class=\"view-detail\">查看详情</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: \"search\",\r\n    data() {\r\n      return {\r\n        key_word: \"\",\r\n        searchResult: false,\r\n        results: [],\r\n      };\r\n    },\r\n    filters: {\r\n      // 过滤器: 显示摘要的前200个字符\r\n      snippet(value) {\r\n        if (value.length > 200) return value.slice(0, 200) + \"...\";\r\n        return value;\r\n      },\r\n    },\r\n    methods: {\r\n      // 搜索微信文章\r\n      search() {\r\n        this.searchResult = false;  // 初始化时先隐藏结果\r\n        if (this.key_word.trim() === \"\") return; // 如果关键字为空，不执行搜索\r\n        \r\n        this.$axios\r\n         .get(`search_wx?tag=${this.key_word}&cursor=1`)\r\n         .then((res) => {\r\n            console.log(res);\r\n            // 处理后端返回的数据\r\n            if (res.data && res.data.data) {\r\n              this.results = res.data.data.map((item) => ({\r\n                title: item.title,\r\n                summary: item.summary,\r\n                source: item.source,\r\n                time: item.time,\r\n                url: item.url,\r\n              }));\r\n              this.searchResult = true;  // 数据加载完后显示结果\r\n            }\r\n          })\r\n         .catch((err) => {\r\n            console.error(\"搜索失败:\", err);\r\n            this.searchResult = false; // 请求失败时隐藏结果\r\n          });\r\n      },\r\n      // 添加任务（分析）\r\n      add() {\r\n        \r\n        this.$confirm('此操作将分析该话题, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n        }).then(() => {\r\n          this.$axios.get('add_task_wx?tag=' + this.key_word).then((res) => {\r\n            console.log(res);\r\n          });\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消分析'\r\n          });\r\n        });\r\n      }\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n .search {\r\n    display: flex;\r\n  }\r\n .input {\r\n    position: relative;\r\n    top: 5px;\r\n    margin: 0 10px;\r\n    width: 50%;\r\n    height: 70%;\r\n    background-color: #ffffff00;\r\n    border: 1px solid #ccc;\r\n    border: 2px solid #fefeff6a;\r\n    border-radius: 10px;\r\n    color: #fff;\r\n  }\r\n .key {\r\n    width: 570px;\r\n    height: 24px;\r\n    margin: 7px 10px;\r\n    outline: none;\r\n    border: 0;\r\n    font-size: 20px;\r\n    letter-spacing: 1px;\r\n    background-color: #ffffff00;\r\n    color: #fff;\r\n  }\r\n .key::placeholder {\r\n    color: #8d8787;\r\n  }\r\n .search_button {\r\n    margin: 6px;\r\n  }\r\n .search_button button {\r\n    background-color: hsla(166, 74%, 51%, 0.753);\r\n    border-radius: 14px;\r\n    color: #fff;\r\n    font-weight: 600;\r\n    font-size: 16px;\r\n    letter-spacing: 1px;\r\n    width: 80px;\r\n    height: 40px;\r\n  }\r\n .searchResult {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100vh;\r\n    background: linear-gradient(to right, #0e3f46, #2d66acd6);\r\n    z-index: 99;\r\n    overflow: auto;\r\n    border-right: 10px solid #ccc;\r\n    border-left: 10px solid #ccc;\r\n    border: 2px solid #fefeff6a;\r\n    border-radius: 10px;\r\n    color: #fff;\r\n  }\r\n .searchResult::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n .info {\r\n    display: flex;\r\n  }\r\n .text_title {\r\n    color: #f4f6f8;\r\n    margin-top: 5px;\r\n    margin-left: 20px;\r\n    margin-bottom: 0px;\r\n    font: 20px Helvetica, Verdana, Arial, SimHei, SimSun-ExtB;\r\n    \r\n    font-size: 23px;\r\n  }\r\n .result {\r\n    padding-top: 5px;\r\n    height: 17vh;\r\n    border-bottom: 2px solid #ffffffb9;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n .result:hover {\r\n    background: #e7e7e277;\r\n    box-shadow: #fafafa47 0 0 0;\r\n    cursor: pointer;\r\n  }\r\n .text {\r\n    font-size: 18px;\r\n    margin: 5px 0 0 20px;\r\n    flex: 1;\r\n  }\r\n .title {\r\n    font-size: 25px;\r\n    font-weight: 600;\r\n    text-align: center;\r\n    margin-bottom: 10px;\r\n    border-bottom: 5px solid #f2f6fabc;\r\n  }\r\n .close {\r\n    position: absolute;\r\n    top: 1px;\r\n    right: 20px;\r\n    font-size: 25px;\r\n    color: #fffdfd;\r\n    cursor: pointer;\r\n    padding: 2px;\r\n    transition: background-color 0.3s ease, transform 0.2s ease;\r\n  }\r\n .close:hover {\r\n    background-color: red;\r\n    transform: scale(1.1);\r\n  }\r\n .msg {\r\n    font-size: 15px;\r\n    margin-bottom: 10px;\r\n    margin-left: 20px;\r\n    color: #ffffff;\r\n  }\r\n .analyze-btn {\r\n    background-color: #37bff9;\r\n    color: #fff;\r\n    font-size: 18px;\r\n    padding: 8px 15px;\r\n    border-radius: 20px;\r\n    border: none;\r\n    cursor: pointer;\r\n    margin-left: 20px;\r\n    transition: background-color 0.3s ease, transform 0.2s ease;\r\n  }\r\n .analyze-btn:hover {\r\n    background-color: #29a0bb;\r\n    transform: scale(1.05);\r\n  }\r\n  .view-detail {\r\n    color: rgb(255, 255, 255);\r\n    margin-right: 10px;\r\n    text-decoration: underline;\r\n    text-align: right;\r\n    display: block;\r\n    margin-top: 0px;\r\n    font-size: 15px;\r\n  }\r\n  .view-detail:hover {\r\n    color: rgb(0, 255, 183);\r\n}\r\n  </style>"]}]}